{"ast":null,"code":"import React,{useState,useEffect}from'react';import personaService from'../../services/personaService';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const parseJsonFromString=value=>{if(typeof value!=='string')return null;const trimmed=value.trim();if(!trimmed)return null;const fenced=trimmed.match(/^```(?:json)?\\s*([\\s\\S]*?)\\s*```$/i);const candidate=fenced?fenced[1].trim():trimmed;if(!candidate)return null;try{return JSON.parse(candidate);}catch(e){return null;}};const sanitizeContentText=value=>{if(typeof value!=='string')return'';const trimmed=value.trim();if(!trimmed)return'';const parsed=parseJsonFromString(trimmed);if(parsed&&typeof parsed.content==='string'&&parsed.content.trim()){return parsed.content.trim();}const fenced=trimmed.match(/^```(?:json)?\\s*([\\s\\S]*?)\\s*```$/i);if(fenced){return fenced[1].trim();}return trimmed.replace(/^```(?:json)?/i,'').replace(/```$/i,'').trim();};const toArray=value=>{if(Array.isArray(value)){return value.filter(item=>item!==null&&item!==undefined&&item!=='');}if(typeof value==='string'){const trimmed=value.trim();return trimmed?[trimmed]:[];}return[];};const normalizeTraitChanges=value=>{if(!Array.isArray(value))return[];return value.filter(item=>item&&typeof item==='object');};/**\n * ReflectionCard displays an individual reflection with expandable content\n */const ReflectionCard=_ref=>{var _emotional_state$seco;let{reflection,timeAgo}=_ref;const reflectionId=(reflection===null||reflection===void 0?void 0:reflection.id)||(reflection===null||reflection===void 0?void 0:reflection.reflection_id);// Load expanded state from localStorage\nconst getExpandedState=()=>{try{if(!reflectionId)return false;const key=`reflection_expanded_${reflectionId}`;const stored=localStorage.getItem(key);return stored==='true';}catch(e){return false;}};const[expanded,setExpanded]=useState(getExpandedState);// State for traits\nconst[topTraits,setTopTraits]=useState([]);const[loadingTraits,setLoadingTraits]=useState(false);// Persist expanded state to localStorage\nuseEffect(()=>{if(reflectionId){try{const key=`reflection_expanded_${reflectionId}`;localStorage.setItem(key,expanded.toString());}catch(e){console.warn('Failed to save expanded state:',e);}}},[expanded,reflectionId]);// Fetch traits when component mounts\nuseEffect(()=>{let mounted=true;const fetchTraits=async()=>{try{setLoadingTraits(true);// Fetch default persona traits\nconst resp=await personaService.getDefaultPersonaTraits();if(!mounted)return;// Normalize to { name, value, category }\nconst traits=Array.isArray(resp===null||resp===void 0?void 0:resp.traits)?resp.traits:[];const normalized=traits.map(t=>({name:(t===null||t===void 0?void 0:t.name)||(t===null||t===void 0?void 0:t.trait)||(t===null||t===void 0?void 0:t.id)||'',value:typeof(t===null||t===void 0?void 0:t.value)==='number'?t.value:typeof(t===null||t===void 0?void 0:t.weight)==='number'?t.weight:null,category:(t===null||t===void 0?void 0:t.category)||''})).filter(t=>t.name&&t.value!==null).sort((a,b)=>b.value-a.value).slice(0,6);if(mounted)setTopTraits(normalized);}catch(e){if(mounted)setTopTraits([]);}finally{if(mounted)setLoadingTraits(false);}};fetchTraits();return()=>{mounted=false;};},[]);// Normalize result structure (support string, object, or missing)\nlet parsedResult={};try{if(typeof(reflection===null||reflection===void 0?void 0:reflection.result)==='string'){parsedResult=JSON.parse(reflection.result);}else if(typeof(reflection===null||reflection===void 0?void 0:reflection.result)==='object'&&(reflection===null||reflection===void 0?void 0:reflection.result)!==null){parsedResult=reflection.result;}else{parsedResult={};}}catch(e){parsedResult={};}const fallbackParsed=parseJsonFromString(reflection===null||reflection===void 0?void 0:reflection.content);if(fallbackParsed){parsedResult={...fallbackParsed,...parsedResult};}const rawContent=parsedResult.content||reflection.content||'';const content=sanitizeContentText(rawContent);const themes=toArray(parsedResult.themes);const insights=toArray(parsedResult.insights);const actions=toArray(parsedResult.actions);const trait_changes=normalizeTraitChanges(parsedResult.trait_changes);const baseEmotionalState=parsedResult.emotional_state&&typeof parsedResult.emotional_state==='object'?{...parsedResult.emotional_state}:{};const secondary=toArray(baseEmotionalState.secondary);let intensity=baseEmotionalState.intensity;if(typeof intensity==='string'){const parsed=parseFloat(intensity);intensity=Number.isFinite(parsed)?parsed:undefined;}if(typeof intensity==='number'){intensity=Math.max(0,Math.min(1,intensity));}const emotional_state={...baseEmotionalState,...(typeof intensity==='number'?{intensity}:{}),...(secondary.length>0?{secondary}:{})};return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-[var(--color-border)] bg-[var(--color-bg-elev-1)] rounded-lg overflow-hidden transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-medium text-[var(--color-accent)]\",children:[(reflection.reflection_type||reflection.type||'reflection').toString().replace(/^(.)/,(m,c)=>c.toUpperCase()),\" Reflection\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:timeAgo})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setExpanded(!expanded),className:\"text-[var(--color-accent-strong)] hover:opacity-90 transition-colors\",\"aria-expanded\":expanded,children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:expanded?'Collapse':'Expand'}),/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:`h-5 w-5 transition-transform ${expanded?'rotate-180':''}`,viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\",clipRule:\"evenodd\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:themes.map((theme,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs rounded-full bg-[color:var(--color-accent)/0.08] text-[var(--color-accent)] border border-[var(--color-border)]\",children:theme},i))})}),expanded&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-[var(--color-border)] mt-2 bg-[var(--color-bg-elev-1)]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-sm prose-invert max-w-none whitespace-pre-wrap\",children:content}),trait_changes.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-[var(--color-accent-strong)] mb-2\",children:\"\\uD83D\\uDCCA Trait Changes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:trait_changes.map((change,i)=>{const traitName=change.trait||change.name||'Unknown';const delta=change.delta||change.change||0;const oldVal=change.old_value||change.from;const newVal=change.new_value||change.to;const isIncrease=delta>0;const isDecrease=delta<0;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-secondary)]\",children:traitName}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[oldVal!==undefined&&newVal!==undefined&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-[var(--color-text-muted)]\",children:[typeof oldVal==='number'?oldVal.toFixed(2):oldVal,\" \\u2192 \",typeof newVal==='number'?newVal.toFixed(2):newVal]}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${isIncrease?'text-green-400':isDecrease?'text-red-400':'text-gray-400'}`,children:[isIncrease?'‚Üë':isDecrease?'‚Üì':'=',\" \",Math.abs(delta).toFixed(3)]})]})]},i);})})]}),topTraits.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-[var(--color-accent-strong)] mb-2\",children:\"\\uD83C\\uDFF7\\uFE0F Current Traits\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:topTraits.map((t,i)=>/*#__PURE__*/_jsxs(\"span\",{title:t.category?`${t.name} ‚Ä¢ ${t.category}`:t.name,className:\"px-2 py-0.5 text-[10px] rounded-full bg-[var(--color-bg-elev-2)] text-[var(--color-text-secondary)] border border-[var(--color-border)]\",children:[t.name,typeof t.value==='number'&&/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-accent)]\",children:t.value.toFixed(2)})]})]},`${t.name}-${i}`))})]}),emotional_state&&Object.keys(emotional_state).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-[var(--color-accent-strong)] mb-2\",children:\"Emotional State\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 text-xs\",children:[emotional_state.primary&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-muted)]\",children:\"Primary:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-primary)]\",children:emotional_state.primary})]}),emotional_state.intensity!==undefined&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-muted)]\",children:\"Intensity:\"}),\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-[var(--color-text-primary)]\",children:[(emotional_state.intensity*100).toFixed(0),\"%\"]})]}),((_emotional_state$seco=emotional_state.secondary)===null||_emotional_state$seco===void 0?void 0:_emotional_state$seco.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-muted)]\",children:\"Secondary:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-primary)]\",children:emotional_state.secondary.join(', ')})]}),emotional_state.trend&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-muted)]\",children:\"Trend:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-primary)]\",children:emotional_state.trend})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\",children:[insights.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-[var(--color-accent)] mb-2\",children:\"Key Insights\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside text-xs space-y-1 text-[var(--color-text-secondary)]\",children:insights.map((insight,i)=>/*#__PURE__*/_jsx(\"li\",{children:insight},i))})]}),actions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-[var(--color-accent-strong)] mb-2\",children:\"Suggested Actions\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside text-xs space-y-1 text-[var(--color-text-secondary)]\",children:actions.map((action,i)=>/*#__PURE__*/_jsx(\"li\",{children:action},i))})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-[var(--color-bg-elev-1)] border-t border-[var(--color-border)] flex justify-between items-center\",children:[reflection.id&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-[var(--color-text-muted)]\",children:[\"ID: \",reflection.id.substring(0,8)]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setExpanded(!expanded),className:\"text-xs text-[var(--color-accent)] hover:opacity-90 transition-colors\",children:expanded?'Show Less':'Show More'})]})]});};export default ReflectionCard;","map":{"version":3,"names":["React","useState","useEffect","personaService","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","parseJsonFromString","value","trimmed","trim","fenced","match","candidate","JSON","parse","e","sanitizeContentText","parsed","content","replace","toArray","Array","isArray","filter","item","undefined","normalizeTraitChanges","ReflectionCard","_ref","_emotional_state$seco","reflection","timeAgo","reflectionId","id","reflection_id","getExpandedState","key","stored","localStorage","getItem","expanded","setExpanded","topTraits","setTopTraits","loadingTraits","setLoadingTraits","setItem","toString","console","warn","mounted","fetchTraits","resp","getDefaultPersonaTraits","traits","normalized","map","t","name","trait","weight","category","sort","a","b","slice","parsedResult","result","fallbackParsed","rawContent","themes","insights","actions","trait_changes","baseEmotionalState","emotional_state","secondary","intensity","parseFloat","Number","isFinite","Math","max","min","length","className","children","reflection_type","type","m","c","toUpperCase","onClick","xmlns","viewBox","fill","fillRule","d","clipRule","theme","i","change","traitName","delta","oldVal","old_value","from","newVal","new_value","to","isIncrease","isDecrease","toFixed","abs","title","Object","keys","primary","join","trend","insight","action","substring"],"sources":["/mnt/local/Projects/SELODSP1/selo-ai/frontend/src/components/Reflection/ReflectionCard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport personaService from '../../services/personaService';\n\nconst parseJsonFromString = (value) => {\n  if (typeof value !== 'string') return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n  const fenced = trimmed.match(/^```(?:json)?\\s*([\\s\\S]*?)\\s*```$/i);\n  const candidate = fenced ? fenced[1].trim() : trimmed;\n  if (!candidate) return null;\n  try {\n    return JSON.parse(candidate);\n  } catch (e) {\n    return null;\n  }\n};\n\nconst sanitizeContentText = (value) => {\n  if (typeof value !== 'string') return '';\n  const trimmed = value.trim();\n  if (!trimmed) return '';\n  const parsed = parseJsonFromString(trimmed);\n  if (parsed && typeof parsed.content === 'string' && parsed.content.trim()) {\n    return parsed.content.trim();\n  }\n  const fenced = trimmed.match(/^```(?:json)?\\s*([\\s\\S]*?)\\s*```$/i);\n  if (fenced) {\n    return fenced[1].trim();\n  }\n  return trimmed.replace(/^```(?:json)?/i, '').replace(/```$/i, '').trim();\n};\n\nconst toArray = (value) => {\n  if (Array.isArray(value)) {\n    return value.filter((item) => item !== null && item !== undefined && item !== '');\n  }\n  if (typeof value === 'string') {\n    const trimmed = value.trim();\n    return trimmed ? [trimmed] : [];\n  }\n  return [];\n};\n\nconst normalizeTraitChanges = (value) => {\n  if (!Array.isArray(value)) return [];\n  return value.filter((item) => item && typeof item === 'object');\n};\n\n/**\n * ReflectionCard displays an individual reflection with expandable content\n */\nconst ReflectionCard = ({ reflection, timeAgo }) => {\n  const reflectionId = reflection?.id || reflection?.reflection_id;\n  \n  // Load expanded state from localStorage\n  const getExpandedState = () => {\n    try {\n      if (!reflectionId) return false;\n      const key = `reflection_expanded_${reflectionId}`;\n      const stored = localStorage.getItem(key);\n      return stored === 'true';\n    } catch (e) {\n      return false;\n    }\n  };\n\n  const [expanded, setExpanded] = useState(getExpandedState);\n  // State for traits\n  const [topTraits, setTopTraits] = useState([]);\n  const [loadingTraits, setLoadingTraits] = useState(false);\n\n  // Persist expanded state to localStorage\n  useEffect(() => {\n    if (reflectionId) {\n      try {\n        const key = `reflection_expanded_${reflectionId}`;\n        localStorage.setItem(key, expanded.toString());\n      } catch (e) {\n        console.warn('Failed to save expanded state:', e);\n      }\n    }\n  }, [expanded, reflectionId]);\n\n  // Fetch traits when component mounts\n  useEffect(() => {\n    let mounted = true;\n    \n    const fetchTraits = async () => {\n      try {\n        setLoadingTraits(true);\n        // Fetch default persona traits\n        const resp = await personaService.getDefaultPersonaTraits();\n        if (!mounted) return;\n        \n        // Normalize to { name, value, category }\n        const traits = Array.isArray(resp?.traits) ? resp.traits : [];\n        const normalized = traits\n          .map(t => ({\n            name: t?.name || t?.trait || t?.id || '',\n            value: typeof t?.value === 'number' ? t.value : \n                   (typeof t?.weight === 'number' ? t.weight : null),\n            category: t?.category || '',\n          }))\n          .filter(t => t.name && t.value !== null)\n          .sort((a, b) => (b.value - a.value))\n          .slice(0, 6);\n          \n        if (mounted) setTopTraits(normalized);\n      } catch (e) {\n        if (mounted) setTopTraits([]);\n      } finally {\n        if (mounted) setLoadingTraits(false);\n      }\n    };\n    \n    fetchTraits();\n    return () => { mounted = false; };\n  }, []);\n\n  // Normalize result structure (support string, object, or missing)\n  let parsedResult = {};\n  try {\n    if (typeof reflection?.result === 'string') {\n      parsedResult = JSON.parse(reflection.result);\n    } else if (typeof reflection?.result === 'object' && reflection?.result !== null) {\n      parsedResult = reflection.result;\n    } else {\n      parsedResult = {};\n    }\n  } catch (e) {\n    parsedResult = {};\n  }\n\n  const fallbackParsed = parseJsonFromString(reflection?.content);\n  if (fallbackParsed) {\n    parsedResult = { ...fallbackParsed, ...parsedResult };\n  }\n\n  const rawContent = parsedResult.content || reflection.content || '';\n  const content = sanitizeContentText(rawContent);\n  const themes = toArray(parsedResult.themes);\n  const insights = toArray(parsedResult.insights);\n  const actions = toArray(parsedResult.actions);\n  const trait_changes = normalizeTraitChanges(parsedResult.trait_changes);\n\n  const baseEmotionalState =\n    parsedResult.emotional_state && typeof parsedResult.emotional_state === 'object'\n      ? { ...parsedResult.emotional_state }\n      : {};\n  const secondary = toArray(baseEmotionalState.secondary);\n  let intensity = baseEmotionalState.intensity;\n  if (typeof intensity === 'string') {\n    const parsed = parseFloat(intensity);\n    intensity = Number.isFinite(parsed) ? parsed : undefined;\n  }\n  if (typeof intensity === 'number') {\n    intensity = Math.max(0, Math.min(1, intensity));\n  }\n  const emotional_state = {\n    ...baseEmotionalState,\n    ...(typeof intensity === 'number' ? { intensity } : {}),\n    ...(secondary.length > 0 ? { secondary } : {}),\n  };\n\n  return (\n    <div className=\"border border-[var(--color-border)] bg-[var(--color-bg-elev-1)] rounded-lg overflow-hidden transition-all\">\n      {/* Card Header */}\n      <div className=\"p-4 flex justify-between items-center\">\n        <div>\n          <h4 className=\"text-lg font-medium text-[var(--color-accent)]\">\n            {(reflection.reflection_type || reflection.type || 'reflection')\n              .toString()\n              .replace(/^(.)/, (m, c) => c.toUpperCase())} Reflection\n          </h4>\n          <p className=\"text-xs text-gray-400\">{timeAgo}</p>\n        </div>\n        \n        <button \n          onClick={() => setExpanded(!expanded)} \n          className=\"text-[var(--color-accent-strong)] hover:opacity-90 transition-colors\"\n          aria-expanded={expanded}\n        >\n          <span className=\"sr-only\">{expanded ? 'Collapse' : 'Expand'}</span>\n          <svg \n            xmlns=\"http://www.w3.org/2000/svg\" \n            className={`h-5 w-5 transition-transform ${expanded ? 'rotate-180' : ''}`}\n            viewBox=\"0 0 20 20\" \n            fill=\"currentColor\"\n          >\n            <path \n              fillRule=\"evenodd\" \n              d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" \n              clipRule=\"evenodd\" \n            />\n          </svg>\n        </button>\n      </div>\n      \n      {/* Preview (always visible) */}\n      <div className=\"px-4 pb-2\">\n        <div className=\"flex flex-wrap gap-2\">\n          {themes.map((theme, i) => (\n            <span \n              key={i} \n              className=\"px-2 py-1 text-xs rounded-full bg-[color:var(--color-accent)/0.08] text-[var(--color-accent)] border border-[var(--color-border)]\"\n            >\n              {theme}\n            </span>\n          ))}\n        </div>\n      </div>\n      \n      {/* Expanded content */}\n      {expanded && (\n        <div className=\"p-4 border-t border-[var(--color-border)] mt-2 bg-[var(--color-bg-elev-1)]\">\n          {/* Main reflection content */}\n          <div className=\"space-y-4\">\n            <div className=\"prose prose-sm prose-invert max-w-none whitespace-pre-wrap\">{content}</div>\n            \n            {/* Trait Changes - Shows evolution during this reflection */}\n            {trait_changes.length > 0 && (\n              <div className=\"mt-4 p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\">\n                <h5 className=\"text-sm font-medium text-[var(--color-accent-strong)] mb-2\">üìä Trait Changes</h5>\n                <div className=\"space-y-1\">\n                  {trait_changes.map((change, i) => {\n                    const traitName = change.trait || change.name || 'Unknown';\n                    const delta = change.delta || change.change || 0;\n                    const oldVal = change.old_value || change.from;\n                    const newVal = change.new_value || change.to;\n                    const isIncrease = delta > 0;\n                    const isDecrease = delta < 0;\n                    \n                    return (\n                      <div key={i} className=\"flex items-center justify-between text-xs\">\n                        <span className=\"text-[var(--color-text-secondary)]\">{traitName}</span>\n                        <div className=\"flex items-center gap-2\">\n                          {oldVal !== undefined && newVal !== undefined && (\n                            <span className=\"text-[var(--color-text-muted)]\">\n                              {typeof oldVal === 'number' ? oldVal.toFixed(2) : oldVal} ‚Üí {typeof newVal === 'number' ? newVal.toFixed(2) : newVal}\n                            </span>\n                          )}\n                          <span className={`font-medium ${isIncrease ? 'text-green-400' : isDecrease ? 'text-red-400' : 'text-gray-400'}`}>\n                            {isIncrease ? '‚Üë' : isDecrease ? '‚Üì' : '='} {Math.abs(delta).toFixed(3)}\n                          </span>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n            \n            {/* Current Traits (moved from preview to expanded section) */}\n            {topTraits.length > 0 && (\n              <div className=\"mt-4 p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\">\n                <h5 className=\"text-sm font-medium text-[var(--color-accent-strong)] mb-2\">üè∑Ô∏è Current Traits</h5>\n                <div className=\"flex flex-wrap gap-2\">\n                  {topTraits.map((t, i) => (\n                    <span\n                      key={`${t.name}-${i}`}\n                      title={t.category ? `${t.name} ‚Ä¢ ${t.category}` : t.name}\n                      className=\"px-2 py-0.5 text-[10px] rounded-full bg-[var(--color-bg-elev-2)] text-[var(--color-text-secondary)] border border-[var(--color-border)]\"\n                    >\n                      {t.name}\n                      {typeof t.value === 'number' && (\n                        <>\n                          {\" \"}\n                          <span className=\"text-[var(--color-accent)]\">{(t.value).toFixed(2)}</span>\n                        </>\n                      )}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            {/* Emotional state */}\n            {emotional_state && Object.keys(emotional_state).length > 0 && (\n              <div className=\"mt-4 p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\">\n                <h5 className=\"text-sm font-medium text-[var(--color-accent-strong)] mb-2\">Emotional State</h5>\n                <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                  {emotional_state.primary && (\n                    <div>\n                      <span className=\"text-[var(--color-text-muted)]\">Primary:</span>{\" \"}\n                      <span className=\"text-[var(--color-text-primary)]\">{emotional_state.primary}</span>\n                    </div>\n                  )}\n                  {emotional_state.intensity !== undefined && (\n                    <div>\n                      <span className=\"text-[var(--color-text-muted)]\">Intensity:</span>{\" \"}\n                      <span className=\"text-[var(--color-text-primary)]\">{(emotional_state.intensity * 100).toFixed(0)}%</span>\n                    </div>\n                  )}\n                  {emotional_state.secondary?.length > 0 && (\n                    <div className=\"col-span-2\">\n                      <span className=\"text-[var(--color-text-muted)]\">Secondary:</span>{\" \"}\n                      <span className=\"text-[var(--color-text-primary)]\">{emotional_state.secondary.join(', ')}</span>\n                    </div>\n                  )}\n                  {emotional_state.trend && (\n                    <div className=\"col-span-2\">\n                      <span className=\"text-[var(--color-text-muted)]\">Trend:</span>{\" \"}\n                      <span className=\"text-[var(--color-text-primary)]\">{emotional_state.trend}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n            \n            {/* Insights and Actions */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n              {insights.length > 0 && (\n                <div className=\"p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\">\n                  <h5 className=\"text-sm font-medium text-[var(--color-accent)] mb-2\">Key Insights</h5>\n                  <ul className=\"list-disc list-inside text-xs space-y-1 text-[var(--color-text-secondary)]\">\n                    {insights.map((insight, i) => (\n                      <li key={i}>{insight}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n              \n              {actions.length > 0 && (\n                <div className=\"p-3 rounded-md bg-[var(--color-bg-elev-2)] border border-[var(--color-border)]\">\n                  <h5 className=\"text-sm font-medium text-[var(--color-accent-strong)] mb-2\">Suggested Actions</h5>\n                  <ul className=\"list-disc list-inside text-xs space-y-1 text-[var(--color-text-secondary)]\">\n                    {actions.map((action, i) => (\n                      <li key={i}>{action}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Card Footer */}\n      <div className=\"p-3 bg-[var(--color-bg-elev-1)] border-t border-[var(--color-border)] flex justify-between items-center\">\n        {reflection.id && (\n          <span className=\"text-xs text-[var(--color-text-muted)]\">\n            ID: {reflection.id.substring(0, 8)}\n          </span>\n        )}\n        \n        <button \n          onClick={() => setExpanded(!expanded)} \n          className=\"text-xs text-[var(--color-accent)] hover:opacity-90 transition-colors\"\n        >\n          {expanded ? 'Show Less' : 'Show More'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ReflectionCard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}