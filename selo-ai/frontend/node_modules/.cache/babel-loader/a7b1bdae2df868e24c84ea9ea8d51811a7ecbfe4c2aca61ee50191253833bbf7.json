{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import personaService from'../../services/personaService';import PersonaTraitRadar from'./PersonaTraitRadar';import{formatTraitName}from'../../utils/formatTraitName';/**\n * PersonaAnalytics\n * - Shows current default persona traits (read-only)\n * - On trait select, fetches and displays short history list\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PersonaAnalytics=()=>{const[traits,setTraits]=useState([]);const[selectedTrait,setSelectedTrait]=useState(null);const[history,setHistory]=useState([]);const[personaId,setPersonaId]=useState(null);const[loadingTraits,setLoadingTraits]=useState(true);const[loadingHistory,setLoadingHistory]=useState(false);const[error,setError]=useState(null);const[lastAction,setLastAction]=useState(null);// 'loadTraits' | 'loadHistory'\nuseEffect(()=>{const load=async()=>{try{var _res$data,_res$data2,_res$data3,_res$data3$persona;setLoadingTraits(true);setError(null);setLastAction('loadTraits');const res=await personaService.getDefaultPersonaTraits();const items=(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.traits)||(res===null||res===void 0?void 0:res.traits)||[];const pid=(res===null||res===void 0?void 0:res.persona_id)||(res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.persona_id)||(res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:(_res$data3$persona=_res$data3.persona)===null||_res$data3$persona===void 0?void 0:_res$data3$persona.id);setTraits(items);if(pid)setPersonaId(pid);}catch(e){setError('Failed to load current traits');}finally{setLoadingTraits(false);}};load();},[]);// Real-time refresh: subscribe to persona.evolution events\nuseEffect(()=>{let mounted=true;let socketRef=null;(async()=>{try{socketRef=await personaService.initSocket();if(!mounted)return;socketRef.on('persona.evolution',async _payload=>{try{var _res$data4,_res$data5,_res$data6,_res$data6$persona;// Re-fetch current default persona traits\nconst res=await personaService.getDefaultPersonaTraits();const items=(res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.traits)||(res===null||res===void 0?void 0:res.traits)||[];const pid=(res===null||res===void 0?void 0:res.persona_id)||(res===null||res===void 0?void 0:(_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.persona_id)||(res===null||res===void 0?void 0:(_res$data6=res.data)===null||_res$data6===void 0?void 0:(_res$data6$persona=_res$data6.persona)===null||_res$data6$persona===void 0?void 0:_res$data6$persona.id);setTraits(items);if(pid)setPersonaId(pid);// If current selected trait is present, refresh its history\nif(selectedTrait&&pid){var _r$data;setLastAction('loadHistory');const r=await personaService.getTraitHistory(pid,selectedTrait.name,{limit:15});const histRaw=(r===null||r===void 0?void 0:(_r$data=r.data)===null||_r$data===void 0?void 0:_r$data.history)||(r===null||r===void 0?void 0:r.history)||[];const hist=histRaw.map(h=>{var _ref,_h$reasoning;return{...h,delta:typeof h.new_value==='number'&&typeof h.old_value==='number'?h.new_value-h.old_value:typeof h.delta==='number'?h.delta:null,rationale:(_ref=(_h$reasoning=h.reasoning)!==null&&_h$reasoning!==void 0?_h$reasoning:h.rationale)!==null&&_ref!==void 0?_ref:''};});setHistory(hist);}}catch(err){// soft fail; UI will retry on next event/user action\nconsole.debug('traits refresh failed after evolution event',err);}});}catch(e){console.debug('persona analytics socket init failed',e);}})();return()=>{mounted=false;if(socketRef)socketRef.off('persona.evolution');};},[selectedTrait]);const onSelectTrait=async t=>{setSelectedTrait(t);setHistory([]);if(!t||!t.name)return;try{var _r$data2;setLoadingHistory(true);setError(null);// Require personaId; skip if unavailable\nif(!personaId){setLoadingHistory(false);return;}setLastAction('loadHistory');const r=await personaService.getTraitHistory(personaId,t.name,{limit:15});const histRaw=(r===null||r===void 0?void 0:(_r$data2=r.data)===null||_r$data2===void 0?void 0:_r$data2.history)||(r===null||r===void 0?void 0:r.history)||[];const hist=histRaw.map(h=>{var _ref2,_h$reasoning2;return{...h,delta:typeof h.new_value==='number'&&typeof h.old_value==='number'?h.new_value-h.old_value:typeof h.delta==='number'?h.delta:null,rationale:(_ref2=(_h$reasoning2=h.reasoning)!==null&&_h$reasoning2!==void 0?_h$reasoning2:h.rationale)!==null&&_ref2!==void 0?_ref2:''};});setHistory(hist);}catch(e){setError('Failed to load trait history');}finally{setLoadingHistory(false);}};const radarTraits=useMemo(()=>{return(traits||[]).filter(t=>typeof t.value==='number').map(t=>({name:t.name,value:t.value,category:t.category}));},[traits]);// Build sparkline path from history values (min-max normalized)\nconst Sparkline=_ref3=>{let{data,width=160,height=40,stroke='var(--color-accent)'}=_ref3;if(!data||data.length<2)return null;const values=data.map(d=>{var _d$new_value;return typeof d.value==='number'?d.value:(_d$new_value=d.new_value)!==null&&_d$new_value!==void 0?_d$new_value:0;});const min=Math.min(...values);const max=Math.max(...values);const range=max-min||1;const stepX=width/(values.length-1);const pts=values.map((v,i)=>{const x=i*stepX;const y=height-(v-min)/range*height;return`${x},${y}`;});const poly=pts.join(' ');const title=`Sparkline showing recent values for ${(selectedTrait===null||selectedTrait===void 0?void 0:selectedTrait.name)||'selected trait'}`;const desc=`Min ${min.toFixed(2)}, Max ${max.toFixed(2)}, ${values.length} points.`;return/*#__PURE__*/_jsxs(\"svg\",{width:width,height:height,viewBox:`0 0 ${width} ${height}`,role:\"img\",\"aria-labelledby\":\"sparkline-title sparkline-desc\",children:[/*#__PURE__*/_jsx(\"title\",{id:\"sparkline-title\",children:title}),/*#__PURE__*/_jsx(\"desc\",{id:\"sparkline-desc\",children:desc}),/*#__PURE__*/_jsx(\"polyline\",{points:poly,fill:\"none\",stroke:stroke,strokeWidth:\"2\"})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[var(--color-bg-elev-1)] border border-[var(--color-border)] rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-[var(--color-accent)] mb-3\",children:\"Persona Analytics\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-sm\",role:\"alert\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"px-2 py-1 text-xs rounded border border-[var(--color-border)] hover:bg-[var(--color-bg-elev-2)] text-[var(--color-text-secondary)]\",onClick:()=>{if(lastAction==='loadHistory'&&selectedTrait){onSelectTrait(selectedTrait);}else{// retry traits\n(async()=>{try{var _res$data7,_res$data8,_res$data9,_res$data9$persona;setLoadingTraits(true);setError(null);const res=await personaService.getDefaultPersonaTraits();const items=(res===null||res===void 0?void 0:(_res$data7=res.data)===null||_res$data7===void 0?void 0:_res$data7.traits)||(res===null||res===void 0?void 0:res.traits)||[];const pid=(res===null||res===void 0?void 0:res.persona_id)||(res===null||res===void 0?void 0:(_res$data8=res.data)===null||_res$data8===void 0?void 0:_res$data8.persona_id)||(res===null||res===void 0?void 0:(_res$data9=res.data)===null||_res$data9===void 0?void 0:(_res$data9$persona=_res$data9.persona)===null||_res$data9$persona===void 0?void 0:_res$data9$persona.id);setTraits(items);if(pid)setPersonaId(pid);}catch(e){setError('Failed to load current traits');}finally{setLoadingTraits(false);}})();}},children:\"Retry\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border border-[var(--color-border)] rounded p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-[var(--color-text-secondary)]\",children:\"Persona Trait Radar\"}),loadingTraits&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-[var(--color-text-muted)]\",children:\"Loading...\"})]}),radarTraits&&radarTraits.length>0?/*#__PURE__*/_jsx(PersonaTraitRadar,{traits:radarTraits}):/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-[var(--color-text-muted)] text-sm\",role:\"status\",children:\"No trait data yet\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-[var(--color-text-secondary)]\",children:\"All Traits\"}),loadingTraits&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-[var(--color-text-muted)]\",children:\"Loading...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-64 overflow-y-auto divide-y divide-[var(--color-border)] border border-[var(--color-border)] rounded\",\"aria-live\":\"polite\",\"aria-busy\":loadingTraits,children:loadingTraits?/*#__PURE__*/_jsx(\"div\",{className:\"p-3 space-y-2\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-[var(--color-bg-elev-2)] rounded animate-pulse\"},i))}):traits.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-[var(--color-text-muted)] text-sm\",role:\"status\",children:\"No traits available\"}):traits.map((t,idx)=>/*#__PURE__*/_jsxs(\"button\",{className:`w-full flex items-center justify-between p-3 text-left hover:bg-[var(--color-bg-elev-2)] transition-colors ${(selectedTrait===null||selectedTrait===void 0?void 0:selectedTrait.name)===t.name?'bg-[var(--color-bg-elev-2)]':''}`,onClick:()=>onSelectTrait(t),\"aria-pressed\":(selectedTrait===null||selectedTrait===void 0?void 0:selectedTrait.name)===t.name,\"aria-label\":`Select trait ${formatTraitName(t.name)} with current value ${typeof t.value==='number'?t.value.toFixed(2):'-'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-primary)] text-sm truncate\",children:formatTraitName(t.name)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-accent)] text-sm ml-3\",children:typeof t.value==='number'?t.value.toFixed(2):'-'})]},idx))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-medium text-[var(--color-text-secondary)]\",children:[\"Trait History\",selectedTrait!==null&&selectedTrait!==void 0&&selectedTrait.name?`: ${formatTraitName(selectedTrait.name)}`:'']}),loadingHistory&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-[var(--color-text-muted)]\",role:\"status\",\"aria-live\":\"polite\",children:\"Loading...\"})]}),selectedTrait&&history.length>1&&!loadingHistory&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 px-2 py-1 bg-[var(--color-bg-elev-2)] border border-[var(--color-border)] rounded\",children:/*#__PURE__*/_jsx(Sparkline,{data:history})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-48 overflow-y-auto border border-[var(--color-border)] rounded\",\"aria-live\":\"polite\",\"aria-busy\":loadingHistory,children:loadingHistory?/*#__PURE__*/_jsx(\"div\",{className:\"p-3 space-y-3\",children:[...Array(4)].map((_,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-3 bg-[var(--color-bg-elev-2)] rounded animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-3 w-2/3 bg-[var(--color-bg-elev-2)] rounded animate-pulse\"})]},i))}):!selectedTrait||history.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-[var(--color-text-muted)] text-sm\",role:\"status\",children:selectedTrait?'No history entries.':'Select a trait to view history.'}):/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-[var(--color-border)]\",children:history.map((h,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-[var(--color-text-secondary)]\",children:[\"\\u0394 \",typeof h.delta==='number'?h.delta.toFixed(3):h.delta]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-muted)]\",children:h.timestamp?new Date(h.timestamp).toLocaleString():''})]}),h.rationale&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 text-[var(--color-text-muted)] text-xs line-clamp-2\",children:h.rationale})]},i))})})]})]});};export default PersonaAnalytics;","map":{"version":3,"names":["React","useEffect","useMemo","useState","personaService","PersonaTraitRadar","formatTraitName","jsx","_jsx","jsxs","_jsxs","PersonaAnalytics","traits","setTraits","selectedTrait","setSelectedTrait","history","setHistory","personaId","setPersonaId","loadingTraits","setLoadingTraits","loadingHistory","setLoadingHistory","error","setError","lastAction","setLastAction","load","_res$data","_res$data2","_res$data3","_res$data3$persona","res","getDefaultPersonaTraits","items","data","pid","persona_id","persona","id","e","mounted","socketRef","initSocket","on","_payload","_res$data4","_res$data5","_res$data6","_res$data6$persona","_r$data","r","getTraitHistory","name","limit","histRaw","hist","map","h","_ref","_h$reasoning","delta","new_value","old_value","rationale","reasoning","err","console","debug","off","onSelectTrait","t","_r$data2","_ref2","_h$reasoning2","radarTraits","filter","value","category","Sparkline","_ref3","width","height","stroke","length","values","d","_d$new_value","min","Math","max","range","stepX","pts","v","i","x","y","poly","join","title","desc","toFixed","viewBox","role","children","points","fill","strokeWidth","className","onClick","_res$data7","_res$data8","_res$data9","_res$data9$persona","Array","_","idx","timestamp","Date","toLocaleString"],"sources":["/mnt/local/Projects/SELODSP1/selo-ai/frontend/src/components/Persona/PersonaAnalytics.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport personaService from '../../services/personaService';\nimport PersonaTraitRadar from './PersonaTraitRadar';\nimport { formatTraitName } from '../../utils/formatTraitName';\n\n/**\n * PersonaAnalytics\n * - Shows current default persona traits (read-only)\n * - On trait select, fetches and displays short history list\n */\nconst PersonaAnalytics = () => {\n  const [traits, setTraits] = useState([]);\n  const [selectedTrait, setSelectedTrait] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [personaId, setPersonaId] = useState(null);\n  const [loadingTraits, setLoadingTraits] = useState(true);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n  const [error, setError] = useState(null);\n  const [lastAction, setLastAction] = useState(null); // 'loadTraits' | 'loadHistory'\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        setLoadingTraits(true);\n        setError(null);\n        setLastAction('loadTraits');\n        const res = await personaService.getDefaultPersonaTraits();\n        const items = res?.data?.traits || res?.traits || [];\n        const pid = res?.persona_id || res?.data?.persona_id || res?.data?.persona?.id;\n        setTraits(items);\n        if (pid) setPersonaId(pid);\n      } catch (e) {\n        setError('Failed to load current traits');\n      } finally {\n        setLoadingTraits(false);\n      }\n    };\n    load();\n  }, []);\n\n  // Real-time refresh: subscribe to persona.evolution events\n  useEffect(() => {\n    let mounted = true;\n    let socketRef = null;\n    (async () => {\n      try {\n        socketRef = await personaService.initSocket();\n        if (!mounted) return;\n        socketRef.on('persona.evolution', async (_payload) => {\n          try {\n            // Re-fetch current default persona traits\n            const res = await personaService.getDefaultPersonaTraits();\n            const items = res?.data?.traits || res?.traits || [];\n            const pid = res?.persona_id || res?.data?.persona_id || res?.data?.persona?.id;\n            setTraits(items);\n            if (pid) setPersonaId(pid);\n            // If current selected trait is present, refresh its history\n            if (selectedTrait && pid) {\n              setLastAction('loadHistory');\n              const r = await personaService.getTraitHistory(pid, selectedTrait.name, { limit: 15 });\n              const histRaw = r?.data?.history || r?.history || [];\n              const hist = histRaw.map(h => ({\n                ...h,\n                delta: (typeof h.new_value === 'number' && typeof h.old_value === 'number')\n                  ? (h.new_value - h.old_value)\n                  : (typeof h.delta === 'number' ? h.delta : null),\n                rationale: h.reasoning ?? h.rationale ?? '',\n              }));\n              setHistory(hist);\n            }\n          } catch (err) {\n            // soft fail; UI will retry on next event/user action\n            console.debug('traits refresh failed after evolution event', err);\n          }\n        });\n      } catch (e) {\n        console.debug('persona analytics socket init failed', e);\n      }\n    })();\n    return () => {\n      mounted = false;\n      if (socketRef) socketRef.off('persona.evolution');\n    };\n  }, [selectedTrait]);\n\n  const onSelectTrait = async (t) => {\n    setSelectedTrait(t);\n    setHistory([]);\n    if (!t || !t.name) return;\n    try {\n      setLoadingHistory(true);\n      setError(null);\n      // Require personaId; skip if unavailable\n      if (!personaId) {\n        setLoadingHistory(false);\n        return;\n      }\n      setLastAction('loadHistory');\n      const r = await personaService.getTraitHistory(personaId, t.name, { limit: 15 });\n      const histRaw = r?.data?.history || r?.history || [];\n      const hist = histRaw.map(h => ({\n        ...h,\n        delta: (typeof h.new_value === 'number' && typeof h.old_value === 'number')\n          ? (h.new_value - h.old_value)\n          : (typeof h.delta === 'number' ? h.delta : null),\n        rationale: h.reasoning ?? h.rationale ?? '',\n      }));\n      setHistory(hist);\n    } catch (e) {\n      setError('Failed to load trait history');\n    } finally {\n      setLoadingHistory(false);\n    }\n  };\n\n  const radarTraits = useMemo(() => {\n    return (traits || [])\n      .filter(t => typeof t.value === 'number')\n      .map(t => ({\n        name: t.name,\n        value: t.value,\n        category: t.category,\n      }));\n  }, [traits]);\n\n  // Build sparkline path from history values (min-max normalized)\n  const Sparkline = ({ data, width = 160, height = 40, stroke = 'var(--color-accent)' }) => {\n    if (!data || data.length < 2) return null;\n    const values = data.map(d => (typeof d.value === 'number' ? d.value : (d.new_value ?? 0)));\n    const min = Math.min(...values);\n    const max = Math.max(...values);\n    const range = max - min || 1;\n    const stepX = width / (values.length - 1);\n    const pts = values.map((v, i) => {\n      const x = i * stepX;\n      const y = height - ((v - min) / range) * height;\n      return `${x},${y}`;\n    });\n    const poly = pts.join(' ');\n    const title = `Sparkline showing recent values for ${selectedTrait?.name || 'selected trait'}`;\n    const desc = `Min ${min.toFixed(2)}, Max ${max.toFixed(2)}, ${values.length} points.`;\n    return (\n      <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} role=\"img\" aria-labelledby=\"sparkline-title sparkline-desc\">\n        <title id=\"sparkline-title\">{title}</title>\n        <desc id=\"sparkline-desc\">{desc}</desc>\n        <polyline points={poly} fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\n      </svg>\n    );\n  };\n\n  return (\n    <div className=\"bg-[var(--color-bg-elev-1)] border border-[var(--color-border)] rounded-lg p-4\">\n      <h3 className=\"text-lg font-semibold text-[var(--color-accent)] mb-3\">Persona Analytics</h3>\n\n      {error && (\n        <div className=\"mb-3 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-sm\" role=\"alert\">\n          <div className=\"flex items-center justify-between gap-3\">\n            <span>{error}</span>\n            <button\n              className=\"px-2 py-1 text-xs rounded border border-[var(--color-border)] hover:bg-[var(--color-bg-elev-2)] text-[var(--color-text-secondary)]\"\n              onClick={() => {\n                if (lastAction === 'loadHistory' && selectedTrait) {\n                  onSelectTrait(selectedTrait);\n                } else {\n                  // retry traits\n                  (async () => {\n                    try {\n                      setLoadingTraits(true);\n                      setError(null);\n                      const res = await personaService.getDefaultPersonaTraits();\n                      const items = res?.data?.traits || res?.traits || [];\n                      const pid = res?.persona_id || res?.data?.persona_id || res?.data?.persona?.id;\n                      setTraits(items);\n                      if (pid) setPersonaId(pid);\n                    } catch (e) {\n                      setError('Failed to load current traits');\n                    } finally {\n                      setLoadingTraits(false);\n                    }\n                  })();\n                }\n              }}\n            >Retry</button>\n          </div>\n        </div>\n      )}\n\n      {/* Top 6 Radar + Full Trait List Side-by-Side */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div className=\"border border-[var(--color-border)] rounded p-3\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <h4 className=\"text-sm font-medium text-[var(--color-text-secondary)]\">Persona Trait Radar</h4>\n            {loadingTraits && <span className=\"text-xs text-[var(--color-text-muted)]\">Loading...</span>}\n          </div>\n          {radarTraits && radarTraits.length > 0 ? (\n            <PersonaTraitRadar traits={radarTraits} />\n          ) : (\n            <div className=\"p-3 text-[var(--color-text-muted)] text-sm\" role=\"status\">No trait data yet</div>\n          )}\n        </div>\n        <div>\n          <div className=\"flex items-center justify-between mb-2\">\n            <h4 className=\"text-sm font-medium text-[var(--color-text-secondary)]\">All Traits</h4>\n            {loadingTraits && <span className=\"text-xs text-[var(--color-text-muted)]\">Loading...</span>}\n          </div>\n          <div className=\"max-h-64 overflow-y-auto divide-y divide-[var(--color-border)] border border-[var(--color-border)] rounded\" aria-live=\"polite\" aria-busy={loadingTraits}>\n            {loadingTraits ? (\n              <div className=\"p-3 space-y-2\">\n                {[...Array(5)].map((_, i) => (\n                  <div key={i} className=\"h-6 bg-[var(--color-bg-elev-2)] rounded animate-pulse\" />\n                ))}\n              </div>\n            ) : traits.length === 0 ? (\n              <div className=\"p-3 text-[var(--color-text-muted)] text-sm\" role=\"status\">No traits available</div>\n            ) : (\n              traits.map((t, idx) => (\n                <button\n                  key={idx}\n                  className={`w-full flex items-center justify-between p-3 text-left hover:bg-[var(--color-bg-elev-2)] transition-colors ${selectedTrait?.name === t.name ? 'bg-[var(--color-bg-elev-2)]' : ''}`}\n                  onClick={() => onSelectTrait(t)}\n                  aria-pressed={selectedTrait?.name === t.name}\n                  aria-label={`Select trait ${formatTraitName(t.name)} with current value ${typeof t.value === 'number' ? t.value.toFixed(2) : '-'}`}\n                >\n                  <span className=\"text-[var(--color-text-primary)] text-sm truncate\">{formatTraitName(t.name)}</span>\n                  <span className=\"text-[var(--color-accent)] text-sm ml-3\">{typeof t.value === 'number' ? t.value.toFixed(2) : '-'}</span>\n                </button>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Trait History */}\n      <div className=\"mt-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h4 className=\"text-sm font-medium text-[var(--color-text-secondary)]\">Trait History{selectedTrait?.name ? `: ${formatTraitName(selectedTrait.name)}` : ''}</h4>\n          {loadingHistory && <span className=\"text-xs text-[var(--color-text-muted)]\" role=\"status\" aria-live=\"polite\">Loading...</span>}\n        </div>\n        {/* Sparkline for selected trait */}\n        {selectedTrait && history.length > 1 && !loadingHistory && (\n          <div className=\"mb-2 px-2 py-1 bg-[var(--color-bg-elev-2)] border border-[var(--color-border)] rounded\">\n            <Sparkline data={history} />\n          </div>\n        )}\n        <div className=\"max-h-48 overflow-y-auto border border-[var(--color-border)] rounded\" aria-live=\"polite\" aria-busy={loadingHistory}>\n          {loadingHistory ? (\n            <div className=\"p-3 space-y-3\">\n              {[...Array(4)].map((_, i) => (\n                <div key={i} className=\"space-y-1\">\n                  <div className=\"h-3 bg-[var(--color-bg-elev-2)] rounded animate-pulse\" />\n                  <div className=\"h-3 w-2/3 bg-[var(--color-bg-elev-2)] rounded animate-pulse\" />\n                </div>\n              ))}\n            </div>\n          ) : (!selectedTrait || history.length === 0) ? (\n            <div className=\"p-3 text-[var(--color-text-muted)] text-sm\" role=\"status\">\n              {selectedTrait ? 'No history entries.' : 'Select a trait to view history.'}\n            </div>\n          ) : (\n            <ul className=\"divide-y divide-[var(--color-border)]\">\n              {history.map((h, i) => (\n                <li key={i} className=\"p-3\">\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <span className=\"text-[var(--color-text-secondary)]\">Î” {typeof h.delta === 'number' ? h.delta.toFixed(3) : h.delta}</span>\n                    <span className=\"text-[var(--color-text-muted)]\">{h.timestamp ? new Date(h.timestamp).toLocaleString() : ''}</span>\n                  </div>\n                  {h.rationale && (\n                    <div className=\"mt-1 text-[var(--color-text-muted)] text-xs line-clamp-2\">{h.rationale}</div>\n                  )}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PersonaAnalytics;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}