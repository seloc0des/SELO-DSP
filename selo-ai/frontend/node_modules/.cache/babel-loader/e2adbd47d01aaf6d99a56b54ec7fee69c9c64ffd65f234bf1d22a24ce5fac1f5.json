{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import personaService from'../../services/personaService';import PersonaTraitRadar from'./PersonaTraitRadar';/**\n * PersonaAnalytics\n * - Shows current default persona traits (read-only)\n * - On trait select, fetches and displays short history list\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PersonaAnalytics=()=>{const[traits,setTraits]=useState([]);const[selectedTrait,setSelectedTrait]=useState(null);const[history,setHistory]=useState([]);const[personaId,setPersonaId]=useState(null);const[loadingTraits,setLoadingTraits]=useState(true);const[loadingHistory,setLoadingHistory]=useState(false);const[error,setError]=useState(null);const[lastAction,setLastAction]=useState(null);// 'loadTraits' | 'loadHistory'\nuseEffect(()=>{const load=async()=>{try{var _res$data,_res$data2,_res$data3,_res$data3$persona;setLoadingTraits(true);setError(null);setLastAction('loadTraits');const res=await personaService.getDefaultPersonaTraits();const items=(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.traits)||(res===null||res===void 0?void 0:res.traits)||[];const pid=(res===null||res===void 0?void 0:res.persona_id)||(res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.persona_id)||(res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:(_res$data3$persona=_res$data3.persona)===null||_res$data3$persona===void 0?void 0:_res$data3$persona.id);setTraits(items);if(pid)setPersonaId(pid);}catch(e){setError('Failed to load current traits');}finally{setLoadingTraits(false);}};load();},[]);// Real-time refresh: subscribe to persona.evolution events\nuseEffect(()=>{let mounted=true;let socketRef=null;(async()=>{try{socketRef=await personaService.initSocket();if(!mounted)return;socketRef.on('persona.evolution',async _payload=>{try{var _res$data4,_res$data5,_res$data6,_res$data6$persona;// Re-fetch current default persona traits\nconst res=await personaService.getDefaultPersonaTraits();const items=(res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.traits)||(res===null||res===void 0?void 0:res.traits)||[];const pid=(res===null||res===void 0?void 0:res.persona_id)||(res===null||res===void 0?void 0:(_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.persona_id)||(res===null||res===void 0?void 0:(_res$data6=res.data)===null||_res$data6===void 0?void 0:(_res$data6$persona=_res$data6.persona)===null||_res$data6$persona===void 0?void 0:_res$data6$persona.id);setTraits(items);if(pid)setPersonaId(pid);// If current selected trait is present, refresh its history\nif(selectedTrait&&pid){var _r$data;setLastAction('loadHistory');const r=await personaService.getTraitHistory(pid,selectedTrait.name,{limit:15});const hist=(r===null||r===void 0?void 0:(_r$data=r.data)===null||_r$data===void 0?void 0:_r$data.history)||(r===null||r===void 0?void 0:r.history)||[];setHistory(hist);}}catch(err){// soft fail; UI will retry on next event/user action\nconsole.debug('traits refresh failed after evolution event',err);}});}catch(e){console.debug('persona analytics socket init failed',e);}})();return()=>{mounted=false;if(socketRef)socketRef.off('persona.evolution');};},[selectedTrait]);const onSelectTrait=async t=>{setSelectedTrait(t);setHistory([]);if(!t||!t.name)return;try{var _r$data2;setLoadingHistory(true);setError(null);// Require personaId; skip if unavailable\nif(!personaId){setLoadingHistory(false);return;}setLastAction('loadHistory');const r=await personaService.getTraitHistory(personaId,t.name,{limit:15});const hist=(r===null||r===void 0?void 0:(_r$data2=r.data)===null||_r$data2===void 0?void 0:_r$data2.history)||(r===null||r===void 0?void 0:r.history)||[];setHistory(hist);}catch(e){setError('Failed to load trait history');}finally{setLoadingHistory(false);}};// Compute Top 6 traits by weighted ordering: confidence desc, then value desc\nconst topSix=useMemo(()=>{const sortable=(traits||[]).filter(t=>typeof t.value==='number').sort((a,b)=>{const bc=typeof b.confidence==='number'?b.confidence:0;const ac=typeof a.confidence==='number'?a.confidence:0;if(bc!==ac)return bc-ac;// higher confidence first\nconst bv=typeof b.value==='number'?b.value:0;const av=typeof a.value==='number'?a.value:0;return bv-av;// tie-break on value\n});return sortable.slice(0,6);},[traits]);// Build sparkline path from history values (min-max normalized)\nconst Sparkline=_ref=>{let{data,width=160,height=40,stroke='var(--color-accent)'}=_ref;if(!data||data.length<2)return null;const values=data.map(d=>{var _d$new_value;return typeof d.value==='number'?d.value:(_d$new_value=d.new_value)!==null&&_d$new_value!==void 0?_d$new_value:0;});const min=Math.min(...values);const max=Math.max(...values);const range=max-min||1;const stepX=width/(values.length-1);const pts=values.map((v,i)=>{const x=i*stepX;const y=height-(v-min)/range*height;return`${x},${y}`;});const poly=pts.join(' ');const title=`Sparkline showing recent values for ${(selectedTrait===null||selectedTrait===void 0?void 0:selectedTrait.name)||'selected trait'}`;const desc=`Min ${min.toFixed(2)}, Max ${max.toFixed(2)}, ${values.length} points.`;return/*#__PURE__*/_jsxs(\"svg\",{width:width,height:height,viewBox:`0 0 ${width} ${height}`,role:\"img\",\"aria-labelledby\":\"sparkline-title sparkline-desc\",children:[/*#__PURE__*/_jsx(\"title\",{id:\"sparkline-title\",children:title}),/*#__PURE__*/_jsx(\"desc\",{id:\"sparkline-desc\",children:desc}),/*#__PURE__*/_jsx(\"polyline\",{points:poly,fill:\"none\",stroke:stroke,strokeWidth:\"2\"})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[var(--color-bg-elev-1)] border border-[var(--color-border)] rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-[var(--color-accent)] mb-3\",children:\"Persona Analytics\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-sm\",role:\"alert\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"px-2 py-1 text-xs rounded border border-[var(--color-border)] hover:bg-[var(--color-bg-elev-2)] text-[var(--color-text-secondary)]\",onClick:()=>{if(lastAction==='loadHistory'&&selectedTrait){onSelectTrait(selectedTrait);}else{// retry traits\n(async()=>{try{var _res$data7,_res$data8,_res$data9,_res$data9$persona;setLoadingTraits(true);setError(null);const res=await personaService.getDefaultPersonaTraits();const items=(res===null||res===void 0?void 0:(_res$data7=res.data)===null||_res$data7===void 0?void 0:_res$data7.traits)||(res===null||res===void 0?void 0:res.traits)||[];const pid=(res===null||res===void 0?void 0:res.persona_id)||(res===null||res===void 0?void 0:(_res$data8=res.data)===null||_res$data8===void 0?void 0:_res$data8.persona_id)||(res===null||res===void 0?void 0:(_res$data9=res.data)===null||_res$data9===void 0?void 0:(_res$data9$persona=_res$data9.persona)===null||_res$data9$persona===void 0?void 0:_res$data9$persona.id);setTraits(items);if(pid)setPersonaId(pid);}catch(e){setError('Failed to load current traits');}finally{setLoadingTraits(false);}})();}},children:\"Retry\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border border-[var(--color-border)] rounded p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-[var(--color-text-secondary)]\",children:\"Top 6 Weighted Traits\"}),loadingTraits&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-[var(--color-text-muted)]\",children:\"Loading...\"})]}),topSix&&topSix.length>0?/*#__PURE__*/_jsx(PersonaTraitRadar,{traits:topSix.map(t=>({name:t.name,value:t.value,category:t.category})),size:280}):/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-[var(--color-text-muted)] text-sm\",role:\"status\",children:\"No trait data yet\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-[var(--color-text-secondary)]\",children:\"All Traits\"}),loadingTraits&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-[var(--color-text-muted)]\",children:\"Loading...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-64 overflow-y-auto divide-y divide-[var(--color-border)] border border-[var(--color-border)] rounded\",\"aria-live\":\"polite\",\"aria-busy\":loadingTraits,children:loadingTraits?/*#__PURE__*/_jsx(\"div\",{className:\"p-3 space-y-2\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-[var(--color-bg-elev-2)] rounded animate-pulse\"},i))}):traits.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-[var(--color-text-muted)] text-sm\",role:\"status\",children:\"No traits available\"}):traits.map((t,idx)=>/*#__PURE__*/_jsxs(\"button\",{className:`w-full flex items-center justify-between p-3 text-left hover:bg-[var(--color-bg-elev-2)] transition-colors ${(selectedTrait===null||selectedTrait===void 0?void 0:selectedTrait.name)===t.name?'bg-[var(--color-bg-elev-2)]':''}`,onClick:()=>onSelectTrait(t),\"aria-pressed\":(selectedTrait===null||selectedTrait===void 0?void 0:selectedTrait.name)===t.name,\"aria-label\":`Select trait ${t.name} with current value ${typeof t.value==='number'?t.value.toFixed(2):'-'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-primary)] text-sm truncate\",children:t.name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-accent)] text-sm ml-3\",children:typeof t.value==='number'?t.value.toFixed(2):'-'})]},idx))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-medium text-[var(--color-text-secondary)]\",children:[\"Trait History\",selectedTrait!==null&&selectedTrait!==void 0&&selectedTrait.name?`: ${selectedTrait.name}`:'']}),loadingHistory&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-[var(--color-text-muted)]\",role:\"status\",\"aria-live\":\"polite\",children:\"Loading...\"})]}),selectedTrait&&history.length>1&&!loadingHistory&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 px-2 py-1 bg-[var(--color-bg-elev-2)] border border-[var(--color-border)] rounded\",children:/*#__PURE__*/_jsx(Sparkline,{data:history})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-48 overflow-y-auto border border-[var(--color-border)] rounded\",\"aria-live\":\"polite\",\"aria-busy\":loadingHistory,children:loadingHistory?/*#__PURE__*/_jsx(\"div\",{className:\"p-3 space-y-3\",children:[...Array(4)].map((_,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-3 bg-[var(--color-bg-elev-2)] rounded animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-3 w-2/3 bg-[var(--color-bg-elev-2)] rounded animate-pulse\"})]},i))}):!selectedTrait||history.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-[var(--color-text-muted)] text-sm\",role:\"status\",children:selectedTrait?'No history entries.':'Select a trait to view history.'}):/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-[var(--color-border)]\",children:history.map((h,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-[var(--color-text-secondary)]\",children:[\"\\u0394 \",typeof h.delta==='number'?h.delta.toFixed(3):h.delta]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--color-text-muted)]\",children:h.timestamp?new Date(h.timestamp).toLocaleString():''})]}),h.rationale&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 text-[var(--color-text-muted)] text-xs line-clamp-2\",children:h.rationale})]},i))})})]})]});};export default PersonaAnalytics;","map":{"version":3,"names":["React","useEffect","useMemo","useState","personaService","PersonaTraitRadar","jsx","_jsx","jsxs","_jsxs","PersonaAnalytics","traits","setTraits","selectedTrait","setSelectedTrait","history","setHistory","personaId","setPersonaId","loadingTraits","setLoadingTraits","loadingHistory","setLoadingHistory","error","setError","lastAction","setLastAction","load","_res$data","_res$data2","_res$data3","_res$data3$persona","res","getDefaultPersonaTraits","items","data","pid","persona_id","persona","id","e","mounted","socketRef","initSocket","on","_payload","_res$data4","_res$data5","_res$data6","_res$data6$persona","_r$data","r","getTraitHistory","name","limit","hist","err","console","debug","off","onSelectTrait","t","_r$data2","topSix","sortable","filter","value","sort","a","b","bc","confidence","ac","bv","av","slice","Sparkline","_ref","width","height","stroke","length","values","map","d","_d$new_value","new_value","min","Math","max","range","stepX","pts","v","i","x","y","poly","join","title","desc","toFixed","viewBox","role","children","points","fill","strokeWidth","className","onClick","_res$data7","_res$data8","_res$data9","_res$data9$persona","category","size","Array","_","idx","h","delta","timestamp","Date","toLocaleString","rationale"],"sources":["/mnt/local/Projects/SELODSP1/selo-ai/frontend/src/components/Persona/PersonaAnalytics.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport personaService from '../../services/personaService';\nimport PersonaTraitRadar from './PersonaTraitRadar';\n\n/**\n * PersonaAnalytics\n * - Shows current default persona traits (read-only)\n * - On trait select, fetches and displays short history list\n */\nconst PersonaAnalytics = () => {\n  const [traits, setTraits] = useState([]);\n  const [selectedTrait, setSelectedTrait] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [personaId, setPersonaId] = useState(null);\n  const [loadingTraits, setLoadingTraits] = useState(true);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n  const [error, setError] = useState(null);\n  const [lastAction, setLastAction] = useState(null); // 'loadTraits' | 'loadHistory'\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        setLoadingTraits(true);\n        setError(null);\n        setLastAction('loadTraits');\n        const res = await personaService.getDefaultPersonaTraits();\n        const items = res?.data?.traits || res?.traits || [];\n        const pid = res?.persona_id || res?.data?.persona_id || res?.data?.persona?.id;\n        setTraits(items);\n        if (pid) setPersonaId(pid);\n      } catch (e) {\n        setError('Failed to load current traits');\n      } finally {\n        setLoadingTraits(false);\n      }\n    };\n    load();\n  }, []);\n\n  // Real-time refresh: subscribe to persona.evolution events\n  useEffect(() => {\n    let mounted = true;\n    let socketRef = null;\n    (async () => {\n      try {\n        socketRef = await personaService.initSocket();\n        if (!mounted) return;\n        socketRef.on('persona.evolution', async (_payload) => {\n          try {\n            // Re-fetch current default persona traits\n            const res = await personaService.getDefaultPersonaTraits();\n            const items = res?.data?.traits || res?.traits || [];\n            const pid = res?.persona_id || res?.data?.persona_id || res?.data?.persona?.id;\n            setTraits(items);\n            if (pid) setPersonaId(pid);\n            // If current selected trait is present, refresh its history\n            if (selectedTrait && pid) {\n              setLastAction('loadHistory');\n              const r = await personaService.getTraitHistory(pid, selectedTrait.name, { limit: 15 });\n              const hist = r?.data?.history || r?.history || [];\n              setHistory(hist);\n            }\n          } catch (err) {\n            // soft fail; UI will retry on next event/user action\n            console.debug('traits refresh failed after evolution event', err);\n          }\n        });\n      } catch (e) {\n        console.debug('persona analytics socket init failed', e);\n      }\n    })();\n    return () => {\n      mounted = false;\n      if (socketRef) socketRef.off('persona.evolution');\n    };\n  }, [selectedTrait]);\n\n  const onSelectTrait = async (t) => {\n    setSelectedTrait(t);\n    setHistory([]);\n    if (!t || !t.name) return;\n    try {\n      setLoadingHistory(true);\n      setError(null);\n      // Require personaId; skip if unavailable\n      if (!personaId) {\n        setLoadingHistory(false);\n        return;\n      }\n      setLastAction('loadHistory');\n      const r = await personaService.getTraitHistory(personaId, t.name, { limit: 15 });\n      const hist = r?.data?.history || r?.history || [];\n      setHistory(hist);\n    } catch (e) {\n      setError('Failed to load trait history');\n    } finally {\n      setLoadingHistory(false);\n    }\n  };\n\n  // Compute Top 6 traits by weighted ordering: confidence desc, then value desc\n  const topSix = useMemo(() => {\n    const sortable = (traits || [])\n      .filter(t => typeof t.value === 'number')\n      .sort((a, b) => {\n        const bc = (typeof b.confidence === 'number' ? b.confidence : 0);\n        const ac = (typeof a.confidence === 'number' ? a.confidence : 0);\n        if (bc !== ac) return bc - ac; // higher confidence first\n        const bv = (typeof b.value === 'number' ? b.value : 0);\n        const av = (typeof a.value === 'number' ? a.value : 0);\n        return bv - av; // tie-break on value\n      });\n    return sortable.slice(0, 6);\n  }, [traits]);\n\n  // Build sparkline path from history values (min-max normalized)\n  const Sparkline = ({ data, width = 160, height = 40, stroke = 'var(--color-accent)' }) => {\n    if (!data || data.length < 2) return null;\n    const values = data.map(d => (typeof d.value === 'number' ? d.value : (d.new_value ?? 0)));\n    const min = Math.min(...values);\n    const max = Math.max(...values);\n    const range = max - min || 1;\n    const stepX = width / (values.length - 1);\n    const pts = values.map((v, i) => {\n      const x = i * stepX;\n      const y = height - ((v - min) / range) * height;\n      return `${x},${y}`;\n    });\n    const poly = pts.join(' ');\n    const title = `Sparkline showing recent values for ${selectedTrait?.name || 'selected trait'}`;\n    const desc = `Min ${min.toFixed(2)}, Max ${max.toFixed(2)}, ${values.length} points.`;\n    return (\n      <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} role=\"img\" aria-labelledby=\"sparkline-title sparkline-desc\">\n        <title id=\"sparkline-title\">{title}</title>\n        <desc id=\"sparkline-desc\">{desc}</desc>\n        <polyline points={poly} fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\n      </svg>\n    );\n  };\n\n  return (\n    <div className=\"bg-[var(--color-bg-elev-1)] border border-[var(--color-border)] rounded-lg p-4\">\n      <h3 className=\"text-lg font-semibold text-[var(--color-accent)] mb-3\">Persona Analytics</h3>\n\n      {error && (\n        <div className=\"mb-3 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-sm\" role=\"alert\">\n          <div className=\"flex items-center justify-between gap-3\">\n            <span>{error}</span>\n            <button\n              className=\"px-2 py-1 text-xs rounded border border-[var(--color-border)] hover:bg-[var(--color-bg-elev-2)] text-[var(--color-text-secondary)]\"\n              onClick={() => {\n                if (lastAction === 'loadHistory' && selectedTrait) {\n                  onSelectTrait(selectedTrait);\n                } else {\n                  // retry traits\n                  (async () => {\n                    try {\n                      setLoadingTraits(true);\n                      setError(null);\n                      const res = await personaService.getDefaultPersonaTraits();\n                      const items = res?.data?.traits || res?.traits || [];\n                      const pid = res?.persona_id || res?.data?.persona_id || res?.data?.persona?.id;\n                      setTraits(items);\n                      if (pid) setPersonaId(pid);\n                    } catch (e) {\n                      setError('Failed to load current traits');\n                    } finally {\n                      setLoadingTraits(false);\n                    }\n                  })();\n                }\n              }}\n            >Retry</button>\n          </div>\n        </div>\n      )}\n\n      {/* Top 6 Radar + Full Trait List Side-by-Side */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div className=\"border border-[var(--color-border)] rounded p-3\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <h4 className=\"text-sm font-medium text-[var(--color-text-secondary)]\">Top 6 Weighted Traits</h4>\n            {loadingTraits && <span className=\"text-xs text-[var(--color-text-muted)]\">Loading...</span>}\n          </div>\n          {topSix && topSix.length > 0 ? (\n            <PersonaTraitRadar traits={topSix.map(t => ({ name: t.name, value: t.value, category: t.category }))} size={280} />\n          ) : (\n            <div className=\"p-3 text-[var(--color-text-muted)] text-sm\" role=\"status\">No trait data yet</div>\n          )}\n        </div>\n        <div>\n          <div className=\"flex items-center justify-between mb-2\">\n            <h4 className=\"text-sm font-medium text-[var(--color-text-secondary)]\">All Traits</h4>\n            {loadingTraits && <span className=\"text-xs text-[var(--color-text-muted)]\">Loading...</span>}\n          </div>\n          <div className=\"max-h-64 overflow-y-auto divide-y divide-[var(--color-border)] border border-[var(--color-border)] rounded\" aria-live=\"polite\" aria-busy={loadingTraits}>\n            {loadingTraits ? (\n              <div className=\"p-3 space-y-2\">\n                {[...Array(5)].map((_, i) => (\n                  <div key={i} className=\"h-6 bg-[var(--color-bg-elev-2)] rounded animate-pulse\" />\n                ))}\n              </div>\n            ) : traits.length === 0 ? (\n              <div className=\"p-3 text-[var(--color-text-muted)] text-sm\" role=\"status\">No traits available</div>\n            ) : (\n              traits.map((t, idx) => (\n                <button\n                  key={idx}\n                  className={`w-full flex items-center justify-between p-3 text-left hover:bg-[var(--color-bg-elev-2)] transition-colors ${selectedTrait?.name === t.name ? 'bg-[var(--color-bg-elev-2)]' : ''}`}\n                  onClick={() => onSelectTrait(t)}\n                  aria-pressed={selectedTrait?.name === t.name}\n                  aria-label={`Select trait ${t.name} with current value ${typeof t.value === 'number' ? t.value.toFixed(2) : '-'}`}\n                >\n                  <span className=\"text-[var(--color-text-primary)] text-sm truncate\">{t.name}</span>\n                  <span className=\"text-[var(--color-accent)] text-sm ml-3\">{typeof t.value === 'number' ? t.value.toFixed(2) : '-'}</span>\n                </button>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Trait History */}\n      <div className=\"mt-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h4 className=\"text-sm font-medium text-[var(--color-text-secondary)]\">Trait History{selectedTrait?.name ? `: ${selectedTrait.name}` : ''}</h4>\n          {loadingHistory && <span className=\"text-xs text-[var(--color-text-muted)]\" role=\"status\" aria-live=\"polite\">Loading...</span>}\n        </div>\n        {/* Sparkline for selected trait */}\n        {selectedTrait && history.length > 1 && !loadingHistory && (\n          <div className=\"mb-2 px-2 py-1 bg-[var(--color-bg-elev-2)] border border-[var(--color-border)] rounded\">\n            <Sparkline data={history} />\n          </div>\n        )}\n        <div className=\"max-h-48 overflow-y-auto border border-[var(--color-border)] rounded\" aria-live=\"polite\" aria-busy={loadingHistory}>\n          {loadingHistory ? (\n            <div className=\"p-3 space-y-3\">\n              {[...Array(4)].map((_, i) => (\n                <div key={i} className=\"space-y-1\">\n                  <div className=\"h-3 bg-[var(--color-bg-elev-2)] rounded animate-pulse\" />\n                  <div className=\"h-3 w-2/3 bg-[var(--color-bg-elev-2)] rounded animate-pulse\" />\n                </div>\n              ))}\n            </div>\n          ) : (!selectedTrait || history.length === 0) ? (\n            <div className=\"p-3 text-[var(--color-text-muted)] text-sm\" role=\"status\">\n              {selectedTrait ? 'No history entries.' : 'Select a trait to view history.'}\n            </div>\n          ) : (\n            <ul className=\"divide-y divide-[var(--color-border)]\">\n              {history.map((h, i) => (\n                <li key={i} className=\"p-3\">\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <span className=\"text-[var(--color-text-secondary)]\">Î” {typeof h.delta === 'number' ? h.delta.toFixed(3) : h.delta}</span>\n                    <span className=\"text-[var(--color-text-muted)]\">{h.timestamp ? new Date(h.timestamp).toLocaleString() : ''}</span>\n                  </div>\n                  {h.rationale && (\n                    <div className=\"mt-1 text-[var(--color-text-muted)] text-xs line-clamp-2\">{h.rationale}</div>\n                  )}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PersonaAnalytics;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}