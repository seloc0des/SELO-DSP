{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{v4 as uuidv4}from'uuid';import ReflectionPanel from'./ReflectionPanel';import{reflectionService}from'../services/reflectionService';import{getApiBaseUrl}from'../services/config';// Runtime-resolved API base URL\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const trimTrailingSlash=s=>s.replace(/\\/$/,'');// Enforce strict reflection-first UX (no assistant release without matching reflection)\nconst STRICT_REFLECTION_FIRST=true;const Chat=_ref=>{let{userId}=_ref;const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[isLoading,setIsLoading]=useState(false);const[reflectingCount,setReflectingCount]=useState(0);const[apiBase,setApiBase]=useState(null);// Map of turnId -> assistant message content waiting for matching reflection\nconst pendingAnswersRef=useRef(new Map());const reflectionsSeenRef=useRef(new Set());const[sessionId,setSessionId]=useState(null);// Track per-turn timeouts for releasing pending assistant messages if reflection is delayed\nconst pendingTimeoutsRef=useRef(new Map());const messagesEndRef=useRef(null);// Auto-scroll to bottom when messages change\nuseEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);// Cleanup pending timeouts on unmount to prevent memory leaks\nuseEffect(()=>{return()=>{// Clear all pending timeouts when component unmounts\npendingTimeoutsRef.current.forEach(timeoutId=>{clearTimeout(timeoutId);});pendingTimeoutsRef.current.clear();};},[]);// Resolve API base URL at runtime via backend /config.json (with fallbacks inside getApiBaseUrl)\nuseEffect(()=>{let mounted=true;(async()=>{try{const base=await getApiBaseUrl();if(mounted)setApiBase(base);}catch(e){console.warn('Failed to resolve API base URL:',e);if(mounted)setApiBase('http://localhost:8000');}})();return()=>{mounted=false;};},[]);// Establish a single, consistent session id across the app. Prefer App's userId prop.\nuseEffect(()=>{// If App provided a userId, use it and persist to localStorage for continuity\nif(userId&&typeof userId==='string'){setSessionId(userId);try{localStorage.setItem('selo_ai_session_id',userId);}catch(_){}return;}// Fallback to existing persisted session id or create a new one\nlet sid=null;try{sid=localStorage.getItem('selo_ai_session_id');}catch(_){sid=null;}if(!sid){sid=uuidv4();try{localStorage.setItem('selo_ai_session_id',sid);}catch(_){}}setSessionId(sid);},[userId]);// Load conversation history when sessionId is available\nuseEffect(()=>{if(!sessionId||!apiBase)return;const loadConversationHistory=async()=>{try{const response=await fetch(`${trimTrailingSlash(apiBase)}/conversations/history?session_id=${sessionId}`,{method:'GET',headers:{'Content-Type':'application/json'}});if(response.ok){const data=await response.json();if(data.messages&&Array.isArray(data.messages)){// Convert backend message format to frontend format\nconst formattedMessages=data.messages.map(msg=>({role:msg.role==='user'?'user':'assistant',content:msg.content}));setMessages(formattedMessages);}}}catch(error){console.warn('[Chat] Failed to load conversation history:',error);// Don't show error to user, just start with empty conversation\n}};loadConversationHistory();},[sessionId,apiBase]);// Subscribe to reflections: show a visible \"Reflecting…\" indicator during generation and\n// release pending assistant messages when matching turn_id arrives\nuseEffect(()=>{if(!sessionId)return;const unsubscribe=reflectionService.onReflectionGenerated(evt=>{// Reflection service emits both generating and generated events to this listener.\n// evt.status can be 'generating' | 'complete'.\nconst base=evt||{};if(base.status==='generating'){// Show indicator\nsetReflectingCount(c=>c+1);}const payload=(base===null||base===void 0?void 0:base.data)||base;if(!payload)return;const{turn_id,user_profile_id}=payload;if(!turn_id)return;if(user_profile_id&&user_profile_id!==sessionId)return;if(base.status==='complete'){// Hide indicator (decrement counter; guard below zero)\nsetReflectingCount(c=>Math.max(0,c-1));reflectionsSeenRef.current.add(turn_id);if(pendingAnswersRef.current.has(turn_id)){const content=pendingAnswersRef.current.get(turn_id);pendingAnswersRef.current.delete(turn_id);// Clear any pending timeout for this turn\nconst t=pendingTimeoutsRef.current.get(turn_id);if(t){clearTimeout(t);pendingTimeoutsRef.current.delete(turn_id);}setMessages(prev=>[...prev,{role:'assistant',content}]);}else if(pendingAnswersRef.current.size===1){// Fallback: if exactly one pending answer exists for this session but the turn_id didn't match,\n// release it to avoid a stuck UI due to rare id mismatch races.\ntry{console.warn('[Reflect] releasing unmatched pending assistant due to single-pending fallback');}catch(_){}const[[k,v]]=Array.from(pendingAnswersRef.current.entries());pendingAnswersRef.current.delete(k);const t2=pendingTimeoutsRef.current.get(k);if(t2){clearTimeout(t2);pendingTimeoutsRef.current.delete(k);}setMessages(prev=>[...prev,{role:'assistant',content:v}]);}}},sessionId);return()=>{if(typeof unsubscribe==='function')unsubscribe();};},[sessionId]);const clearConversation=()=>{setMessages([]);// Optionally generate a new session ID to start fresh\nconst newSessionId=uuidv4();setSessionId(newSessionId);try{localStorage.setItem('selo_ai_session_id',newSessionId);}catch(_){}};const handleSubmit=async e=>{e.preventDefault();if(!input.trim()||isLoading||!apiBase||!sessionId)return;const userMessage={role:'user',content:input};setMessages(prev=>[...prev,userMessage]);setInput('');setIsLoading(true);try{const CHAT_ENDPOINT=`${trimTrailingSlash(apiBase)}/chat`;// Debug logging removed for production\nconst response=await fetch(CHAT_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({session_id:sessionId,prompt:input})});if(!response.ok){const text=await response.text().catch(()=>'');try{console.error('[Chat] /chat non-OK',response.status,text);}catch(_){}throw new Error('Network response was not ok');}const data=await response.json();// Debug logging removed for production\nconst turnId=data.turn_id;const assistantContent=data.response;// Prefer showing reflection first. Gate assistant until matching reflection arrives,\n// but fall back after a short timeout to prevent indefinite blocking.\nif(turnId){if(reflectionsSeenRef.current.has(turnId)){setMessages(prev=>[...prev,{role:'assistant',content:assistantContent}]);}else{pendingAnswersRef.current.set(turnId,assistantContent);// Optional fallback release is disabled when STRICT_REFLECTION_FIRST is true\nif(!STRICT_REFLECTION_FIRST){const timeoutId=setTimeout(()=>{if(pendingAnswersRef.current.has(turnId)){pendingAnswersRef.current.delete(turnId);pendingTimeoutsRef.current.delete(turnId);setMessages(prev=>[...prev,{role:'assistant',content:assistantContent}]);}},8000);pendingTimeoutsRef.current.set(turnId,timeoutId);}}}else{// No turn_id returned, show immediately\nsetMessages(prev=>[...prev,{role:'assistant',content:assistantContent}]);}}catch(error){console.error('[Chat] submit error:',error);setMessages(prev=>[...prev,{role:'assistant',content:'Sorry, there was an error processing your request. Please try again.'}]);}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-full w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-1 h-full max-w-2xl min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4 mb-4\",children:[reflectingCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-[var(--color-accent)] mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-[var(--color-accent)] rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Reflecting\\u2026\"})]}),!apiBase?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Loading configuration...\"})})}):messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg mb-2\",children:\"Welcome to SELO DSP\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Start a conversation with your SELO\"})]})}):messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:`flex ${message.role==='user'?'justify-end':'justify-start'}`,children:/*#__PURE__*/_jsx(\"div\",{className:`max-w-[75%] rounded-lg p-4 ${message.role==='user'?'bg-[var(--color-bg-elev-1)] border border-[var(--color-accent)]/40 text-white':'bg-[var(--color-bg-elev-1)] border border-[var(--color-border)] text-[var(--color-text-secondary)]'}`,children:/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap\",children:message.content})})},index)),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-[var(--color-accent)]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-[var(--color-accent)] rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-[var(--color-accent)] rounded-full animate-pulse delay-150\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-[var(--color-accent)] rounded-full animate-pulse delay-300\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm\",children:\"SELO DSP is thinking...\"})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),placeholder:\"Type your message...\",className:\"flex-1 bg-[var(--color-bg-elev-1)] border border-[var(--color-border)] rounded-lg px-4 py-2 text-white focus:outline-none\",disabled:isLoading}),messages.length>0&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:clearConversation,className:\"px-4 py-2 bg-[var(--color-bg-elev-1)] hover:bg-[var(--color-bg-elev-2)] text-gray-400 hover:text-white border border-[var(--color-border)] rounded-lg font-medium transition-colors\",title:\"Clear conversation\",children:\"Clear\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!input.trim()||isLoading,className:\"px-6 py-2 bg-[var(--color-bg-elev-1)] hover:bg-[var(--color-bg-elev-2)] text-[var(--color-accent)] border border-[var(--color-accent)]/50 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Send\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden md:block md:w-[420px] md:min-w-[320px] md:max-w-[520px] h-full border-l border-[var(--color-border)] bg-[var(--color-bg-elev-1)]\",children:/*#__PURE__*/_jsx(ReflectionPanel,{sessionId:sessionId,messages:messages})})]});};export default Chat;","map":{"version":3,"names":["React","useState","useRef","useEffect","v4","uuidv4","ReflectionPanel","reflectionService","getApiBaseUrl","jsx","_jsx","jsxs","_jsxs","trimTrailingSlash","s","replace","STRICT_REFLECTION_FIRST","Chat","_ref","userId","messages","setMessages","input","setInput","isLoading","setIsLoading","reflectingCount","setReflectingCount","apiBase","setApiBase","pendingAnswersRef","Map","reflectionsSeenRef","Set","sessionId","setSessionId","pendingTimeoutsRef","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","forEach","timeoutId","clearTimeout","clear","mounted","base","e","console","warn","localStorage","setItem","_","sid","getItem","loadConversationHistory","response","fetch","method","headers","ok","data","json","Array","isArray","formattedMessages","map","msg","role","content","error","unsubscribe","onReflectionGenerated","evt","status","c","payload","turn_id","user_profile_id","Math","max","add","has","get","delete","t","prev","size","k","v","from","entries","t2","clearConversation","newSessionId","handleSubmit","preventDefault","trim","userMessage","CHAT_ENDPOINT","body","JSON","stringify","session_id","prompt","text","catch","Error","turnId","assistantContent","set","setTimeout","className","children","length","message","index","ref","onSubmit","type","value","onChange","target","placeholder","disabled","onClick","title"],"sources":["/mnt/local/Projects/SELODSP1/selo-ai/frontend/src/components/Chat.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport ReflectionPanel from './ReflectionPanel';\nimport { reflectionService } from '../services/reflectionService';\nimport { getApiBaseUrl } from '../services/config';\n\n// Runtime-resolved API base URL\nconst trimTrailingSlash = (s) => s.replace(/\\/$/, '');\n// Enforce strict reflection-first UX (no assistant release without matching reflection)\nconst STRICT_REFLECTION_FIRST = true;\n\nconst Chat = ({ userId }) => {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [reflectingCount, setReflectingCount] = useState(0);\n  const [apiBase, setApiBase] = useState(null);\n  // Map of turnId -> assistant message content waiting for matching reflection\n  const pendingAnswersRef = useRef(new Map());\n  const reflectionsSeenRef = useRef(new Set());\n  const [sessionId, setSessionId] = useState(null);\n  // Track per-turn timeouts for releasing pending assistant messages if reflection is delayed\n  const pendingTimeoutsRef = useRef(new Map());\n  \n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Cleanup pending timeouts on unmount to prevent memory leaks\n  useEffect(() => {\n    return () => {\n      // Clear all pending timeouts when component unmounts\n      pendingTimeoutsRef.current.forEach(timeoutId => {\n        clearTimeout(timeoutId);\n      });\n      pendingTimeoutsRef.current.clear();\n    };\n  }, []);\n\n  // Resolve API base URL at runtime via backend /config.json (with fallbacks inside getApiBaseUrl)\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const base = await getApiBaseUrl();\n        if (mounted) setApiBase(base);\n      } catch (e) {\n        console.warn('Failed to resolve API base URL:', e);\n        if (mounted) setApiBase('http://localhost:8000');\n      }\n    })();\n    return () => { mounted = false; };\n  }, []);\n\n  // Establish a single, consistent session id across the app. Prefer App's userId prop.\n  useEffect(() => {\n    // If App provided a userId, use it and persist to localStorage for continuity\n    if (userId && typeof userId === 'string') {\n      setSessionId(userId);\n      try { localStorage.setItem('selo_ai_session_id', userId); } catch (_) {}\n      return;\n    }\n    // Fallback to existing persisted session id or create a new one\n    let sid = null;\n    try { sid = localStorage.getItem('selo_ai_session_id'); } catch (_) { sid = null; }\n    if (!sid) {\n      sid = uuidv4();\n      try { localStorage.setItem('selo_ai_session_id', sid); } catch (_) {}\n    }\n    setSessionId(sid);\n  }, [userId]);\n\n  // Load conversation history when sessionId is available\n  useEffect(() => {\n    if (!sessionId || !apiBase) return;\n    \n    const loadConversationHistory = async () => {\n      try {\n        const response = await fetch(`${trimTrailingSlash(apiBase)}/conversations/history?session_id=${sessionId}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          if (data.messages && Array.isArray(data.messages)) {\n            // Convert backend message format to frontend format\n            const formattedMessages = data.messages.map(msg => ({\n              role: msg.role === 'user' ? 'user' : 'assistant',\n              content: msg.content\n            }));\n            setMessages(formattedMessages);\n          }\n        }\n      } catch (error) {\n        console.warn('[Chat] Failed to load conversation history:', error);\n        // Don't show error to user, just start with empty conversation\n      }\n    };\n    \n    loadConversationHistory();\n  }, [sessionId, apiBase]);\n\n  // Subscribe to reflections: show a visible \"Reflecting…\" indicator during generation and\n  // release pending assistant messages when matching turn_id arrives\n  useEffect(() => {\n    if (!sessionId) return;\n    const unsubscribe = reflectionService.onReflectionGenerated((evt) => {\n      // Reflection service emits both generating and generated events to this listener.\n      // evt.status can be 'generating' | 'complete'.\n      const base = evt || {};\n      if (base.status === 'generating') {\n        // Show indicator\n        setReflectingCount((c) => c + 1);\n      }\n      const payload = base?.data || base;\n      if (!payload) return;\n      const { turn_id, user_profile_id } = payload;\n      if (!turn_id) return;\n      if (user_profile_id && user_profile_id !== sessionId) return;\n\n      if (base.status === 'complete') {\n        // Hide indicator (decrement counter; guard below zero)\n        setReflectingCount((c) => Math.max(0, c - 1));\n        reflectionsSeenRef.current.add(turn_id);\n        if (pendingAnswersRef.current.has(turn_id)) {\n          const content = pendingAnswersRef.current.get(turn_id);\n          pendingAnswersRef.current.delete(turn_id);\n          // Clear any pending timeout for this turn\n          const t = pendingTimeoutsRef.current.get(turn_id);\n          if (t) { clearTimeout(t); pendingTimeoutsRef.current.delete(turn_id); }\n          setMessages((prev) => [...prev, { role: 'assistant', content }]);\n        } else if (pendingAnswersRef.current.size === 1) {\n          // Fallback: if exactly one pending answer exists for this session but the turn_id didn't match,\n          // release it to avoid a stuck UI due to rare id mismatch races.\n          try { console.warn('[Reflect] releasing unmatched pending assistant due to single-pending fallback'); } catch (_) {}\n          const [[k, v]] = Array.from(pendingAnswersRef.current.entries());\n          pendingAnswersRef.current.delete(k);\n          const t2 = pendingTimeoutsRef.current.get(k);\n          if (t2) { clearTimeout(t2); pendingTimeoutsRef.current.delete(k); }\n          setMessages((prev) => [...prev, { role: 'assistant', content: v }]);\n        }\n      }\n    }, sessionId);\n\n    return () => {\n      if (typeof unsubscribe === 'function') unsubscribe();\n    };\n  }, [sessionId]);\n\n  const clearConversation = () => {\n    setMessages([]);\n    // Optionally generate a new session ID to start fresh\n    const newSessionId = uuidv4();\n    setSessionId(newSessionId);\n    try { \n      localStorage.setItem('selo_ai_session_id', newSessionId); \n    } catch (_) {}\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!input.trim() || isLoading || !apiBase || !sessionId) return;\n\n    const userMessage = { role: 'user', content: input };\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setIsLoading(true);\n\n    try {\n      const CHAT_ENDPOINT = `${trimTrailingSlash(apiBase)}/chat`;\n      // Debug logging removed for production\n      const response = await fetch(CHAT_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          session_id: sessionId,\n          prompt: input,\n        }),\n      });\n\n      if (!response.ok) {\n        const text = await response.text().catch(() => '');\n        try { console.error('[Chat] /chat non-OK', response.status, text); } catch (_) {}\n        throw new Error('Network response was not ok');\n      }\n\n      const data = await response.json();\n      // Debug logging removed for production\n      const turnId = data.turn_id;\n      const assistantContent = data.response;\n      // Prefer showing reflection first. Gate assistant until matching reflection arrives,\n      // but fall back after a short timeout to prevent indefinite blocking.\n      if (turnId) {\n        if (reflectionsSeenRef.current.has(turnId)) {\n          setMessages(prev => [...prev, { role: 'assistant', content: assistantContent }]);\n        } else {\n          pendingAnswersRef.current.set(turnId, assistantContent);\n          // Optional fallback release is disabled when STRICT_REFLECTION_FIRST is true\n          if (!STRICT_REFLECTION_FIRST) {\n            const timeoutId = setTimeout(() => {\n              if (pendingAnswersRef.current.has(turnId)) {\n                pendingAnswersRef.current.delete(turnId);\n                pendingTimeoutsRef.current.delete(turnId);\n                setMessages(prev => [...prev, { role: 'assistant', content: assistantContent }]);\n              }\n            }, 8000);\n            pendingTimeoutsRef.current.set(turnId, timeoutId);\n          }\n        }\n      } else {\n        // No turn_id returned, show immediately\n        setMessages(prev => [...prev, { role: 'assistant', content: assistantContent }]);\n      }\n    } catch (error) {\n      console.error('[Chat] submit error:', error);\n      setMessages(prev => [...prev, {\n        role: 'assistant',\n        content: 'Sorry, there was an error processing your request. Please try again.'\n      }]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex h-full w-full\">\n      {/* Chat panel (left) */}\n      <div className=\"flex flex-col flex-1 h-full max-w-2xl min-w-0\">\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4 mb-4\">\n          {reflectingCount > 0 && (\n            <div className=\"flex items-center space-x-2 text-[var(--color-accent)] mb-2\">\n              <div className=\"w-2 h-2 bg-[var(--color-accent)] rounded-full animate-pulse\"></div>\n              <span className=\"text-sm\">Reflecting…</span>\n            </div>\n          )}\n          {!apiBase ? (\n            <div className=\"flex items-center justify-center h-full\">\n              <div className=\"text-center text-gray-500\">\n                <p className=\"text-sm\">Loading configuration...</p>\n              </div>\n            </div>\n          ) : messages.length === 0 ? (\n            <div className=\"flex items-center justify-center h-full\">\n              <div className=\"text-center text-gray-500\">\n                <p className=\"text-lg mb-2\">Welcome to SELO DSP</p>\n                <p className=\"text-sm\">Start a conversation with your SELO</p>\n              </div>\n            </div>\n          ) : (\n            messages.map((message, index) => (\n              <div\n                key={index}\n                className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div\n                  className={`max-w-[75%] rounded-lg p-4 ${\n                    message.role === 'user'\n                      ? 'bg-[var(--color-bg-elev-1)] border border-[var(--color-accent)]/40 text-white'\n                      : 'bg-[var(--color-bg-elev-1)] border border-[var(--color-border)] text-[var(--color-text-secondary)]'\n                  }`}\n                >\n                  <div className=\"whitespace-pre-wrap\">{message.content}</div>\n                </div>\n              </div>\n            ))\n          )}\n          {isLoading && (\n            <div className=\"flex items-center space-x-2 text-[var(--color-accent)]\">\n              <div className=\"w-2 h-2 bg-[var(--color-accent)] rounded-full animate-pulse\"></div>\n              <div className=\"w-2 h-2 bg-[var(--color-accent)] rounded-full animate-pulse delay-150\"></div>\n              <div className=\"w-2 h-2 bg-[var(--color-accent)] rounded-full animate-pulse delay-300\"></div>\n              <span className=\"ml-2 text-sm\">SELO DSP is thinking...</span>\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n        {/* Input area */}\n        <form onSubmit={handleSubmit} className=\"mt-4\">\n          <div className=\"flex space-x-2\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder=\"Type your message...\"\n              className=\"flex-1 bg-[var(--color-bg-elev-1)] border border-[var(--color-border)] rounded-lg px-4 py-2 text-white focus:outline-none\"\n              disabled={isLoading}\n            />\n            {messages.length > 0 && (\n              <button\n                type=\"button\"\n                onClick={clearConversation}\n                className=\"px-4 py-2 bg-[var(--color-bg-elev-1)] hover:bg-[var(--color-bg-elev-2)] text-gray-400 hover:text-white border border-[var(--color-border)] rounded-lg font-medium transition-colors\"\n                title=\"Clear conversation\"\n              >\n                Clear\n              </button>\n            )}\n            <button\n              type=\"submit\"\n              disabled={!input.trim() || isLoading}\n              className=\"px-6 py-2 bg-[var(--color-bg-elev-1)] hover:bg-[var(--color-bg-elev-2)] text-[var(--color-accent)] border border-[var(--color-accent)]/50 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Send\n            </button>\n          </div>\n        </form>\n      </div>\n      {/* Reflection panel (right). Hidden on small screens to avoid overflow. */}\n      <div className=\"hidden md:block md:w-[420px] md:min-w-[320px] md:max-w-[520px] h-full border-l border-[var(--color-border)] bg-[var(--color-bg-elev-1)]\">\n        <ReflectionPanel sessionId={sessionId} messages={messages} />\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}