{"ast":null,"code":"/**\n * Centralized date formatting utilities\n * Provides consistent date/time display across the application\n */import{formatDistanceToNow}from'date-fns';const coerceDate=value=>{if(!value)return null;if(value instanceof Date){const copy=new Date(value.getTime());return isNaN(copy.getTime())?null:copy;}if(typeof value==='string'){const trimmed=value.trim();if(!trimmed)return null;const hasTimezone=/[zZ]$|[+-]\\d{2}:?\\d{2}$/.test(trimmed);const isoLike=/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d{1,6})?)?$/.test(trimmed);const normalized=!hasTimezone&&isoLike?`${trimmed}Z`:trimmed;const parsed=new Date(normalized);if(!isNaN(parsed.getTime()))return parsed;}try{const fallback=new Date(value);return isNaN(fallback.getTime())?null:fallback;}catch(error){return null;}};/**\n * Format a date string as a relative time (e.g., \"3 hours ago\")\n * @param {string|Date} dateString - Date to format\n * @param {object} options - Options for formatDistanceToNow\n * @returns {string} Formatted relative time string\n */export const formatRelativeTime=function(dateString){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{addSuffix:true};if(!dateString)return'Unknown time';try{const date=coerceDate(dateString);if(!date)return'Unknown time';return formatDistanceToNow(date,options);}catch(error){console.error('Error formatting relative time:',error);return'Unknown time';}};/**\n * Format a date string as an absolute date/time\n * @param {string|Date} dateString - Date to format\n * @param {object} options - Options for toLocaleString\n * @returns {string} Formatted date/time string\n */export const formatAbsoluteTime=function(dateString){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!dateString)return'Unknown time';const defaultOptions={year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit',...options};try{const date=coerceDate(dateString);if(!date)return'Unknown time';return date.toLocaleString('en-US',defaultOptions);}catch(error){console.error('Error formatting absolute time:',error);return'Unknown time';}};/**\n * Check if a date string is valid\n * @param {string|Date} dateString - Date to validate\n * @returns {boolean} True if valid date\n */export const isValidDate=dateString=>{if(!dateString)return false;const date=coerceDate(dateString);return Boolean(date);};/**\n * Format timestamp for reflection cards\n * Combines relative and absolute time for better UX\n * @param {string|Date} dateString - Date to format\n * @returns {string} Formatted timestamp\n */export const formatReflectionTimestamp=dateString=>{if(!dateString)return'Unknown time';try{const date=coerceDate(dateString);if(!date)return'Unknown time';const now=new Date();const diffInHours=(now-date)/(1000*60*60);// If less than 24 hours ago, show relative time\nif(diffInHours<24){return formatDistanceToNow(date,{addSuffix:true});}// Otherwise show absolute date\nreturn date.toLocaleString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});}catch(error){console.error('Error formatting reflection timestamp:',error);return'Unknown time';}};","map":{"version":3,"names":["formatDistanceToNow","coerceDate","value","Date","copy","getTime","isNaN","trimmed","trim","hasTimezone","test","isoLike","normalized","parsed","fallback","error","formatRelativeTime","dateString","options","arguments","length","undefined","addSuffix","date","console","formatAbsoluteTime","defaultOptions","year","month","day","hour","minute","toLocaleString","isValidDate","Boolean","formatReflectionTimestamp","now","diffInHours"],"sources":["/mnt/local/Projects/SELODSP1/selo-ai/frontend/src/utils/dateFormatter.js"],"sourcesContent":["/**\n * Centralized date formatting utilities\n * Provides consistent date/time display across the application\n */\n\nimport { formatDistanceToNow } from 'date-fns';\n\nconst coerceDate = (value) => {\n  if (!value) return null;\n  if (value instanceof Date) {\n    const copy = new Date(value.getTime());\n    return isNaN(copy.getTime()) ? null : copy;\n  }\n  if (typeof value === 'string') {\n    const trimmed = value.trim();\n    if (!trimmed) return null;\n    const hasTimezone = /[zZ]$|[+-]\\d{2}:?\\d{2}$/.test(trimmed);\n    const isoLike = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d{1,6})?)?$/.test(trimmed);\n    const normalized = !hasTimezone && isoLike ? `${trimmed}Z` : trimmed;\n    const parsed = new Date(normalized);\n    if (!isNaN(parsed.getTime())) return parsed;\n  }\n  try {\n    const fallback = new Date(value);\n    return isNaN(fallback.getTime()) ? null : fallback;\n  } catch (error) {\n    return null;\n  }\n};\n\n/**\n * Format a date string as a relative time (e.g., \"3 hours ago\")\n * @param {string|Date} dateString - Date to format\n * @param {object} options - Options for formatDistanceToNow\n * @returns {string} Formatted relative time string\n */\nexport const formatRelativeTime = (dateString, options = { addSuffix: true }) => {\n  if (!dateString) return 'Unknown time';\n  try {\n    const date = coerceDate(dateString);\n    if (!date) return 'Unknown time';\n    return formatDistanceToNow(date, options);\n  } catch (error) {\n    console.error('Error formatting relative time:', error);\n    return 'Unknown time';\n  }\n};\n\n/**\n * Format a date string as an absolute date/time\n * @param {string|Date} dateString - Date to format\n * @param {object} options - Options for toLocaleString\n * @returns {string} Formatted date/time string\n */\nexport const formatAbsoluteTime = (dateString, options = {}) => {\n  if (!dateString) return 'Unknown time';\n  \n  const defaultOptions = {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    ...options\n  };\n  \n  try {\n    const date = coerceDate(dateString);\n    if (!date) return 'Unknown time';\n    return date.toLocaleString('en-US', defaultOptions);\n  } catch (error) {\n    console.error('Error formatting absolute time:', error);\n    return 'Unknown time';\n  }\n};\n\n/**\n * Check if a date string is valid\n * @param {string|Date} dateString - Date to validate\n * @returns {boolean} True if valid date\n */\nexport const isValidDate = (dateString) => {\n  if (!dateString) return false;\n  const date = coerceDate(dateString);\n  return Boolean(date);\n};\n\n/**\n * Format timestamp for reflection cards\n * Combines relative and absolute time for better UX\n * @param {string|Date} dateString - Date to format\n * @returns {string} Formatted timestamp\n */\nexport const formatReflectionTimestamp = (dateString) => {\n  if (!dateString) return 'Unknown time';\n  \n  try {\n    const date = coerceDate(dateString);\n    if (!date) return 'Unknown time';\n    \n    const now = new Date();\n    const diffInHours = (now - date) / (1000 * 60 * 60);\n    \n    // If less than 24 hours ago, show relative time\n    if (diffInHours < 24) {\n      return formatDistanceToNow(date, { addSuffix: true });\n    }\n    \n    // Otherwise show absolute date\n    return date.toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  } catch (error) {\n    console.error('Error formatting reflection timestamp:', error);\n    return 'Unknown time';\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}