{"ast":null,"code":"import React,{useMemo}from'react';/**\n * PersonaTraitRadar (read-only)\n * Displays trait weights on a radar/spider chart using pure SVG.\n * traits: Array<{ name, value: 0..1, category?: string }>\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PersonaTraitRadar=_ref=>{let{traits=[],size=220,levels=4,labelLimit=18,scaleLabel='Scale: 0.0–1.0'}=_ref;const{points,labels,maxRadius}=useMemo(()=>{const valid=traits.filter(t=>typeof t.value==='number');const n=valid.length;const cx=size/2;const cy=size/2;const padding=28;// room for labels\nconst r=size/2-padding;const angleFor=i=>Math.PI*2*i/n-Math.PI/2;// start at top\nconst toPoint=(i,magnitude)=>{const ang=angleFor(i);return[cx+Math.cos(ang)*r*magnitude,cy+Math.sin(ang)*r*magnitude];};const pts=valid.map((t,i)=>toPoint(i,Math.max(0,Math.min(1,t.value))));const lbls=valid.map((t,i)=>({name:t.name,short:t.name.length>labelLimit?t.name.slice(0,labelLimit-1)+'…':t.name,category:t.category||'general',anchor:(()=>{const ang=angleFor(i);const x=cx+Math.cos(ang)*(r+10);const y=cy+Math.sin(ang)*(r+10);let anchor='middle';if(Math.cos(ang)>0.3)anchor='start';else if(Math.cos(ang)<-0.3)anchor='end';return{x,y,anchor};})()}));return{points:pts,labels:lbls,maxRadius:r};},[traits,size,labelLimit]);if(!traits.length){return/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs italic\",children:\"No traits defined\"});}const cx=size/2;const cy=size/2;const polygon=points.map(_ref2=>{let[x,y]=_ref2;return`${x},${y}`;}).join(' ');return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-col items-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:size,height:size,viewBox:`0 0 ${size} ${size}`,role:\"img\",\"aria-label\":\"Persona trait radar chart\",children:[[...Array(levels)].map((_,i)=>{const ratio=(i+1)/levels;return/*#__PURE__*/_jsx(\"circle\",{cx:cx,cy:cy,r:maxRadius*ratio,className:\"fill-none stroke-[var(--color-border)]\",strokeOpacity:0.5,strokeWidth:1},i);}),points.map((_ref3,i)=>{let[x,y]=_ref3;return/*#__PURE__*/_jsx(\"line\",{x1:cx,y1:cy,x2:x,y2:y,className:\"stroke-[var(--color-border)]\",strokeOpacity:0.5,strokeWidth:1},i);}),/*#__PURE__*/_jsx(\"polygon\",{points:polygon,className:\"fill-[var(--color-accent)]/20 stroke-[var(--color-accent)]\",strokeWidth:2}),points.map((_ref4,i)=>{let[x,y]=_ref4;return/*#__PURE__*/_jsx(\"circle\",{cx:x,cy:y,r:3,className:\"fill-[var(--color-accent-strong)] stroke-[var(--color-accent-strong)]\"},i);}),labels.map((l,i)=>/*#__PURE__*/_jsx(\"text\",{x:l.anchor.x,y:l.anchor.y,textAnchor:l.anchor.anchor,className:\"fill-[var(--color-text-secondary)] text-[10px]\",children:l.short},i))]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[11px] text-[var(--color-text-muted)] mt-1\",\"aria-hidden\":true,children:scaleLabel}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:\"Read\\u2011only visualization. Traits evolve autonomously.\"})]});};export default PersonaTraitRadar;","map":{"version":3,"names":["React","useMemo","jsx","_jsx","jsxs","_jsxs","PersonaTraitRadar","_ref","traits","size","levels","labelLimit","scaleLabel","points","labels","maxRadius","valid","filter","t","value","n","length","cx","cy","padding","r","angleFor","i","Math","PI","toPoint","magnitude","ang","cos","sin","pts","map","max","min","lbls","name","short","slice","category","anchor","x","y","className","children","polygon","_ref2","join","width","height","viewBox","role","Array","_","ratio","strokeOpacity","strokeWidth","_ref3","x1","y1","x2","y2","_ref4","l","textAnchor"],"sources":["/mnt/local/Projects/SELODSP1/selo-ai/frontend/src/components/Persona/PersonaTraitRadar.jsx"],"sourcesContent":["import React, { useMemo } from 'react';\n\n/**\n * PersonaTraitRadar (read-only)\n * Displays trait weights on a radar/spider chart using pure SVG.\n * traits: Array<{ name, value: 0..1, category?: string }>\n */\nconst PersonaTraitRadar = ({ traits = [], size = 220, levels = 4, labelLimit = 18, scaleLabel = 'Scale: 0.0–1.0' }) => {\n  const { points, labels, maxRadius } = useMemo(() => {\n    const valid = traits.filter(t => typeof t.value === 'number');\n    const n = valid.length;\n    const cx = size / 2;\n    const cy = size / 2;\n    const padding = 28; // room for labels\n    const r = (size / 2) - padding;\n\n    const angleFor = (i) => (Math.PI * 2 * i) / n - Math.PI / 2; // start at top\n    const toPoint = (i, magnitude) => {\n      const ang = angleFor(i);\n      return [cx + Math.cos(ang) * r * magnitude, cy + Math.sin(ang) * r * magnitude];\n    };\n\n    const pts = valid.map((t, i) => toPoint(i, Math.max(0, Math.min(1, t.value))));\n    const lbls = valid.map((t, i) => ({\n      name: t.name,\n      short: t.name.length > labelLimit ? t.name.slice(0, labelLimit - 1) + '…' : t.name,\n      category: t.category || 'general',\n      anchor: (() => {\n        const ang = angleFor(i);\n        const x = cx + Math.cos(ang) * (r + 10);\n        const y = cy + Math.sin(ang) * (r + 10);\n        let anchor = 'middle';\n        if (Math.cos(ang) > 0.3) anchor = 'start';\n        else if (Math.cos(ang) < -0.3) anchor = 'end';\n        return { x, y, anchor };\n      })(),\n    }));\n\n    return { points: pts, labels: lbls, maxRadius: r };\n  }, [traits, size, labelLimit]);\n\n  if (!traits.length) {\n    return <div className=\"text-gray-500 text-xs italic\">No traits defined</div>;\n  }\n\n  const cx = size / 2;\n  const cy = size / 2;\n\n  const polygon = points.map(([x, y]) => `${x},${y}`).join(' ');\n\n  return (\n    <div className=\"w-full flex flex-col items-center\">\n      <svg width={size} height={size} viewBox={`0 0 ${size} ${size}`} role=\"img\" aria-label=\"Persona trait radar chart\">\n        {/* Rings */}\n        {[...Array(levels)].map((_, i) => {\n          const ratio = (i + 1) / levels;\n          return (\n            <circle\n              key={i}\n              cx={cx}\n              cy={cy}\n              r={maxRadius * ratio}\n              className=\"fill-none stroke-[var(--color-border)]\"\n              strokeOpacity={0.5}\n              strokeWidth={1}\n            />\n          );\n        })}\n\n        {/* Axes */}\n        {points.map(([x, y], i) => (\n          <line key={i} x1={cx} y1={cy} x2={x} y2={y} className=\"stroke-[var(--color-border)]\" strokeOpacity={0.5} strokeWidth={1} />\n        ))}\n\n        {/* Filled polygon */}\n        <polygon points={polygon} className=\"fill-[var(--color-accent)]/20 stroke-[var(--color-accent)]\" strokeWidth={2} />\n\n        {/* Vertices */}\n        {points.map(([x, y], i) => (\n          <circle key={i} cx={x} cy={y} r={3} className=\"fill-[var(--color-accent-strong)] stroke-[var(--color-accent-strong)]\" />\n        ))}\n\n        {/* Labels */}\n        {labels.map((l, i) => (\n          <text\n            key={i}\n            x={l.anchor.x}\n            y={l.anchor.y}\n            textAnchor={l.anchor.anchor}\n            className=\"fill-[var(--color-text-secondary)] text-[10px]\"\n          >\n            {l.short}\n          </text>\n        ))}\n      </svg>\n      <div className=\"text-[11px] text-[var(--color-text-muted)] mt-1\" aria-hidden>{scaleLabel}</div>\n      <div className=\"text-xs text-gray-500 mt-1\">Read‑only visualization. Traits evolve autonomously.</div>\n    </div>\n  );\n};\n\nexport default PersonaTraitRadar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}