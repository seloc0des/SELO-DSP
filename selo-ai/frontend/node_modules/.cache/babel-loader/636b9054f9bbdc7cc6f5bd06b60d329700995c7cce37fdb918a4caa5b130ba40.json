{"ast":null,"code":"import React,{useState,useEffect}from'react';import personaService from'../../services/personaService';import{sanitizeContentText,parseJsonFromString,toArray}from'../Reflection/ReflectionCard';/**\n * Component for displaying persona evolution history\n * Shows timeline of changes and a presentation block (intro or latest summary)\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PersonaEvolution=_ref=>{let{persona,evolutionHistory,userId}=_ref;const[presentation,setPresentation]=useState('');const[presentationType,setPresentationType]=useState('');// 'first_intro' | 'last_session_summary' | ''\nconst mantra=persona&&persona.mantra?persona.mantra:'';const[loading,setLoading]=useState(true);// Normalize evolution changes to an array of strings for robust rendering\nconst normalizeChanges=(changes,sourceType)=>{try{if(!changes)return[];if(Array.isArray(changes))return changes.filter(Boolean).map(String);if(typeof changes==='string')return[changes];if(typeof changes==='object'){// Special handling for bootstrap evolutions\nif(sourceType==='bootstrap'){const out=[];// Extract traits if present\nif(changes.traits&&Array.isArray(changes.traits.traits)){const traitCount=changes.traits.traits.length;out.push(`Generated ${traitCount} initial traits`);}else if(changes.traits&&typeof changes.traits==='object'){out.push('Initial traits established');}// Extract seed description\nif(changes.seed&&changes.seed.description){out.push(`Identity: ${changes.seed.description}`);}// Extract values\nif(changes.seed&&changes.seed.values){const values=changes.seed.values;if(values.core&&Array.isArray(values.core)){out.push(`Core values: ${values.core.join(', ')}`);}if(values.principles&&Array.isArray(values.principles)){out.push(`Principles: ${values.principles.join(', ')}`);}}// Extract knowledge domains\nif(changes.seed&&changes.seed.knowledge_domains&&Array.isArray(changes.seed.knowledge_domains)){out.push(`Knowledge domains: ${changes.seed.knowledge_domains.join(', ')}`);}// Extract communication style\nif(changes.seed&&changes.seed.communication_style){const style=changes.seed.communication_style;if(style.tone){out.push(`Communication tone: ${style.tone}`);}}return out.length>0?out:['Initial persona bootstrap completed'];}// Regular evolution changes\nconst out=[];for(const[k,v]of Object.entries(changes)){if(v===null||v===undefined)continue;// Special handling for trait changes - make them user-friendly\nif(k==='traits'&&Array.isArray(v)){v.forEach(trait=>{const name=trait.name||'Unknown trait';const delta=trait.delta||0;const reason=trait.reason||'';const direction=delta>0?'increased':'decreased';const percentage=Math.abs(Math.round(delta*100));let line=`${name.charAt(0).toUpperCase()+name.slice(1)} ${direction} by ${percentage}%`;if(reason){line+=` - ${reason}`;}out.push(line);});}else if(typeof v==='object'){out.push(`${k}: ${JSON.stringify(v)}`);}else{out.push(`${k}: ${String(v)}`);}}return out;}return[String(changes)];}catch{return[];}};// Fetch presentation content when persona changes\nuseEffect(()=>{if(persona&&persona.id&&userId){setLoading(true);personaService.getPersonaPresentation(userId,persona.id).then(response=>{const data=response&&response.data?response.data:{};const firstIntro=data.first_intro||'';const lastSummary=data.last_session_summary||'';const firstIntroUsed=!!data.first_intro_used;// Logic: if first intro has not been used yet and exists, prefer it; otherwise show last summary\nif(!firstIntroUsed&&firstIntro){setPresentation(firstIntro);setPresentationType('first_intro');}else{setPresentation(lastSummary||firstIntro||'');setPresentationType(lastSummary?'last_session_summary':firstIntro?'first_intro':'');}setLoading(false);}).catch(error=>{console.error('Failed to fetch persona presentation:',error);setLoading(false);});}else if(!userId){// Handle missing userId case - don't try to fetch\nsetLoading(false);setPresentation('');setPresentationType('');}},[persona,userId]);// Format date for display\nconst formatDate=dateString=>{if(!dateString)return'Unknown';const date=new Date(dateString);return date.toLocaleString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[var(--color-bg-elev-1)] rounded-lg p-4 h-full border border-[var(--color-border)]\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium text-[var(--color-accent)] mb-3\",children:\"SELO's Evolution & Narrative\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg text-[var(--color-accent)] font-medium\",children:\"Current Mantra\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs px-2 py-1 rounded bg-gray-700/70 text-gray-300\",children:[\"v\",persona.version||'1.0']})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"h-20 animate-pulse bg-gray-800/50 rounded p-3\"}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800/50 rounded p-3 text-sm max-h-60 overflow-y-auto whitespace-pre-wrap\",children:mantra})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg text-[var(--color-accent)] font-medium mb-2\",children:\"Evolution Timeline\"}),evolutionHistory&&evolutionHistory.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"relative pl-6 border-l border-[var(--color-border)] space-y-6\",children:evolutionHistory.map((entry,index)=>{var _parsedReflection$con;const normalizedChanges=normalizeChanges(entry.changes,entry.source_type);const evidence=entry.evidence||{};const rawReflectionContent=evidence.reflection_content;const parsedReflection=typeof rawReflectionContent==='string'?parseJsonFromString(rawReflectionContent):rawReflectionContent&&typeof rawReflectionContent==='object'?rawReflectionContent:null;const reflectionContentText=rawReflectionContent?sanitizeContentText(typeof rawReflectionContent==='string'?rawReflectionContent:(_parsedReflection$con=parsedReflection===null||parsedReflection===void 0?void 0:parsedReflection.content)!==null&&_parsedReflection$con!==void 0?_parsedReflection$con:''):'';const reflectionThemes=evidence.reflection_themes&&evidence.reflection_themes.length>0?evidence.reflection_themes:toArray(parsedReflection===null||parsedReflection===void 0?void 0:parsedReflection.themes);const reflectionInsights=toArray(parsedReflection===null||parsedReflection===void 0?void 0:parsedReflection.insights);const reflectionActions=toArray(parsedReflection===null||parsedReflection===void 0?void 0:parsedReflection.actions);const reflectionEmotion=parsedReflection&&typeof parsedReflection==='object'&&parsedReflection!==null&&parsedReflection!==void 0&&parsedReflection.emotional_state&&typeof parsedReflection.emotional_state==='object'?parsedReflection.emotional_state:null;const intensityDisplay=reflectionEmotion&&typeof reflectionEmotion.intensity==='number'?reflectionEmotion.intensity>=0&&reflectionEmotion.intensity<=1?`${Math.round(reflectionEmotion.intensity*100)}%`:reflectionEmotion.intensity.toFixed(2):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -left-[21px] w-4 h-4 rounded-full bg-[var(--color-accent)]\",style:{top:'0px'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[var(--color-bg-elev-2)] rounded p-3 pb-4 border border-[var(--color-border)]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:formatDate(entry.timestamp)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:`text-xs px-2 rounded ${entry.confidence>=0.7?'bg-green-900/50 text-green-300':entry.confidence>=0.4?'bg-yellow-900/50 text-yellow-300':'bg-red-900/50 text-red-300'}`,children:[\"Confidence: \",Math.round(entry.confidence*100),\"%\"]}),entry.impact_score!==undefined&&/*#__PURE__*/_jsxs(\"span\",{className:`text-xs px-2 rounded ${entry.impact_score>=0.7?'bg-purple-900/50 text-purple-300':entry.impact_score>=0.4?'bg-blue-900/50 text-blue-300':'bg-gray-900/50 text-gray-300'}`,children:[\"Impact: \",entry.impact_score>=0.7?'High':entry.impact_score>=0.4?'Medium':'Low']})]})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-white mb-1\",children:(()=>{const sourceTypeLabels={'reflection':'Reflection-Driven Evolution','learning':'Learning-Based Growth','scheduled':'Scheduled Reassessment','user_feedback':'User Feedback Integration','bootstrap':'Initial Bootstrap'};return sourceTypeLabels[entry.source_type]||'System Update';})()}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-300 mb-2\",children:entry.source_type==='bootstrap'?'Initial identity bootstrap - persona emerged with core traits, values, and communication style':entry.reasoning||'No description provided'}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 text-[var(--color-accent)] mb-1\",children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"12\",height:\"12\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"18 2 22 6 12 16 8 16 8 12 18 2\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"Changes\"})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside pl-2 text-gray-400\",children:[normalizedChanges.map((change,idx)=>/*#__PURE__*/_jsx(\"li\",{children:change},idx)),normalizedChanges.length===0&&/*#__PURE__*/_jsx(\"li\",{className:\"text-gray-500 italic\",children:\"No specific changes recorded\"})]})]}),(entry.learning_id||entry.evidence&&entry.evidence.reflection_id)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 pt-2 border-t border-gray-700/50 text-xs\",children:[entry.learning_id&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[\"Learning ID: \",entry.learning_id.substring(0,8),\"...\"]}),entry.evidence&&entry.evidence.reflection_id&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Triggered by: \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-[var(--color-accent)] font-mono text-xs\",children:[\"Reflection \",entry.evidence.reflection_id.substring(0,8),\"...\"]})]}),reflectionThemes.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Themes: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:reflectionThemes.join(', ')})]}),(reflectionContentText||reflectionInsights.length>0||reflectionActions.length>0||reflectionEmotion)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 p-3 bg-gray-800/30 rounded border-l-2 border-[var(--color-accent)]/30 text-gray-300\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs mb-2\",children:\"\\uD83D\\uDCAD Reflection\"}),reflectionContentText&&/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap text-sm mb-2\",children:reflectionContentText}),reflectionInsights.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-[10px] uppercase tracking-wide mb-1\",children:\"Insights\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside text-xs space-y-1 text-gray-300\",children:reflectionInsights.map((insight,insightIdx)=>/*#__PURE__*/_jsx(\"li\",{children:insight},insightIdx))})]}),reflectionActions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-[10px] uppercase tracking-wide mb-1\",children:\"Actions\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside text-xs space-y-1 text-gray-300\",children:reflectionActions.map((action,actionIdx)=>/*#__PURE__*/_jsx(\"li\",{children:action},actionIdx))})]}),reflectionEmotion&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-400 space-y-1\",children:[reflectionEmotion.primary&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Primary:\"}),\" \",reflectionEmotion.primary]}),intensityDisplay&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Intensity:\"}),\" \",intensityDisplay]}),Array.isArray(reflectionEmotion.secondary)&&reflectionEmotion.secondary.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Secondary:\"}),\" \",reflectionEmotion.secondary.join(', ')]})]})]})]})]})]})]},index);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[var(--color-bg-elev-2)] p-4 rounded-md text-center border border-[var(--color-border)]\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"No evolution history available yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"The persona will evolve autonomously as it learns from conversations and reflections\"})]})]})]});};export default PersonaEvolution;","map":{"version":3,"names":["React","useState","useEffect","personaService","sanitizeContentText","parseJsonFromString","toArray","jsx","_jsx","jsxs","_jsxs","PersonaEvolution","_ref","persona","evolutionHistory","userId","presentation","setPresentation","presentationType","setPresentationType","mantra","loading","setLoading","normalizeChanges","changes","sourceType","Array","isArray","filter","Boolean","map","String","out","traits","traitCount","length","push","seed","description","values","core","join","principles","knowledge_domains","communication_style","style","tone","k","v","Object","entries","undefined","forEach","trait","name","delta","reason","direction","percentage","Math","abs","round","line","charAt","toUpperCase","slice","JSON","stringify","id","getPersonaPresentation","then","response","data","firstIntro","first_intro","lastSummary","last_session_summary","firstIntroUsed","first_intro_used","catch","error","console","formatDate","dateString","date","Date","toLocaleString","year","month","day","hour","minute","className","children","version","entry","index","_parsedReflection$con","normalizedChanges","source_type","evidence","rawReflectionContent","reflection_content","parsedReflection","reflectionContentText","content","reflectionThemes","reflection_themes","themes","reflectionInsights","insights","reflectionActions","actions","reflectionEmotion","emotional_state","intensityDisplay","intensity","toFixed","top","timestamp","confidence","impact_score","sourceTypeLabels","reasoning","xmlns","width","height","viewBox","fill","stroke","strokeWidth","d","points","change","idx","learning_id","reflection_id","substring","insight","insightIdx","action","actionIdx","primary","secondary"],"sources":["/mnt/local/Projects/SELODSP1/selo-ai/frontend/src/components/Persona/PersonaEvolution.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport personaService from '../../services/personaService';\nimport { sanitizeContentText, parseJsonFromString, toArray } from '../Reflection/ReflectionCard';\n\n/**\n * Component for displaying persona evolution history\n * Shows timeline of changes and a presentation block (intro or latest summary)\n */\nconst PersonaEvolution = ({ persona, evolutionHistory, userId }) => {\n  const [presentation, setPresentation] = useState('');\n  const [presentationType, setPresentationType] = useState(''); // 'first_intro' | 'last_session_summary' | ''\n  const mantra = (persona && persona.mantra) ? persona.mantra : '';\n  const [loading, setLoading] = useState(true);\n  \n  // Normalize evolution changes to an array of strings for robust rendering\n  const normalizeChanges = (changes, sourceType) => {\n    try {\n      if (!changes) return [];\n      if (Array.isArray(changes)) return changes.filter(Boolean).map(String);\n      if (typeof changes === 'string') return [changes];\n      if (typeof changes === 'object') {\n        // Special handling for bootstrap evolutions\n        if (sourceType === 'bootstrap') {\n          const out = [];\n          \n          // Extract traits if present\n          if (changes.traits && Array.isArray(changes.traits.traits)) {\n            const traitCount = changes.traits.traits.length;\n            out.push(`Generated ${traitCount} initial traits`);\n          } else if (changes.traits && typeof changes.traits === 'object') {\n            out.push('Initial traits established');\n          }\n          \n          // Extract seed description\n          if (changes.seed && changes.seed.description) {\n            out.push(`Identity: ${changes.seed.description}`);\n          }\n          \n          // Extract values\n          if (changes.seed && changes.seed.values) {\n            const values = changes.seed.values;\n            if (values.core && Array.isArray(values.core)) {\n              out.push(`Core values: ${values.core.join(', ')}`);\n            }\n            if (values.principles && Array.isArray(values.principles)) {\n              out.push(`Principles: ${values.principles.join(', ')}`);\n            }\n          }\n          \n          // Extract knowledge domains\n          if (changes.seed && changes.seed.knowledge_domains && Array.isArray(changes.seed.knowledge_domains)) {\n            out.push(`Knowledge domains: ${changes.seed.knowledge_domains.join(', ')}`);\n          }\n          \n          // Extract communication style\n          if (changes.seed && changes.seed.communication_style) {\n            const style = changes.seed.communication_style;\n            if (style.tone) {\n              out.push(`Communication tone: ${style.tone}`);\n            }\n          }\n          \n          return out.length > 0 ? out : ['Initial persona bootstrap completed'];\n        }\n        \n        // Regular evolution changes\n        const out = [];\n        for (const [k, v] of Object.entries(changes)) {\n          if (v === null || v === undefined) continue;\n          \n          // Special handling for trait changes - make them user-friendly\n          if (k === 'traits' && Array.isArray(v)) {\n            v.forEach(trait => {\n              const name = trait.name || 'Unknown trait';\n              const delta = trait.delta || 0;\n              const reason = trait.reason || '';\n              const direction = delta > 0 ? 'increased' : 'decreased';\n              const percentage = Math.abs(Math.round(delta * 100));\n              \n              let line = `${name.charAt(0).toUpperCase() + name.slice(1)} ${direction} by ${percentage}%`;\n              if (reason) {\n                line += ` - ${reason}`;\n              }\n              out.push(line);\n            });\n          } else if (typeof v === 'object') {\n            out.push(`${k}: ${JSON.stringify(v)}`);\n          } else {\n            out.push(`${k}: ${String(v)}`);\n          }\n        }\n        return out;\n      }\n      return [String(changes)];\n    } catch {\n      return [];\n    }\n  };\n  \n  // Fetch presentation content when persona changes\n  useEffect(() => {\n    if (persona && persona.id && userId) {\n      setLoading(true);\n      personaService.getPersonaPresentation(userId, persona.id)\n        .then(response => {\n          const data = response && response.data ? response.data : {};\n          const firstIntro = data.first_intro || '';\n          const lastSummary = data.last_session_summary || '';\n          const firstIntroUsed = !!data.first_intro_used;\n          // Logic: if first intro has not been used yet and exists, prefer it; otherwise show last summary\n          if (!firstIntroUsed && firstIntro) {\n            setPresentation(firstIntro);\n            setPresentationType('first_intro');\n          } else {\n            setPresentation(lastSummary || firstIntro || '');\n            setPresentationType(lastSummary ? 'last_session_summary' : (firstIntro ? 'first_intro' : ''));\n          }\n          setLoading(false);\n        })\n        .catch(error => {\n          console.error('Failed to fetch persona presentation:', error);\n          setLoading(false);\n        });\n    } else if (!userId) {\n      // Handle missing userId case - don't try to fetch\n      setLoading(false);\n      setPresentation('');\n      setPresentationType('');\n    }\n  }, [persona, userId]);\n  \n  // Format date for display\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Unknown';\n    const date = new Date(dateString);\n    return date.toLocaleString('en-US', { \n      year: 'numeric', \n      month: 'short', \n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  \n  return (\n    <div className=\"bg-[var(--color-bg-elev-1)] rounded-lg p-4 h-full border border-[var(--color-border)]\">\n      <h3 className=\"text-xl font-medium text-[var(--color-accent)] mb-3\">\n        SELO's Evolution & Narrative\n      </h3>\n      \n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h4 className=\"text-lg text-[var(--color-accent)] font-medium\">\n            Current Mantra\n          </h4>\n          <span className=\"text-xs px-2 py-1 rounded bg-gray-700/70 text-gray-300\">\n            v{persona.version || '1.0'}\n          </span>\n        </div>\n        \n        {loading ? (\n          <div className=\"h-20 animate-pulse bg-gray-800/50 rounded p-3\"></div>\n        ) : (\n          <div className=\"bg-gray-800/50 rounded p-3 text-sm max-h-60 overflow-y-auto whitespace-pre-wrap\">\n            {mantra}\n          </div>\n        )}\n      </div>\n      \n      <div>\n        <h4 className=\"text-lg text-[var(--color-accent)] font-medium mb-2\">Evolution Timeline</h4>\n        \n        {evolutionHistory && evolutionHistory.length > 0 ? (\n          <div className=\"relative pl-6 border-l border-[var(--color-border)] space-y-6\">\n            {evolutionHistory.map((entry, index) => {\n              const normalizedChanges = normalizeChanges(entry.changes, entry.source_type);\n              const evidence = entry.evidence || {};\n              const rawReflectionContent = evidence.reflection_content;\n              const parsedReflection = typeof rawReflectionContent === 'string'\n                ? parseJsonFromString(rawReflectionContent)\n                : (rawReflectionContent && typeof rawReflectionContent === 'object' ? rawReflectionContent : null);\n\n              const reflectionContentText = rawReflectionContent\n                ? sanitizeContentText(\n                    typeof rawReflectionContent === 'string'\n                      ? rawReflectionContent\n                      : (parsedReflection?.content ?? '')\n                  )\n                : '';\n\n              const reflectionThemes = (evidence.reflection_themes && evidence.reflection_themes.length > 0)\n                ? evidence.reflection_themes\n                : toArray(parsedReflection?.themes);\n\n              const reflectionInsights = toArray(parsedReflection?.insights);\n              const reflectionActions = toArray(parsedReflection?.actions);\n              const reflectionEmotion = parsedReflection && typeof parsedReflection === 'object' && parsedReflection?.emotional_state && typeof parsedReflection.emotional_state === 'object'\n                ? parsedReflection.emotional_state\n                : null;\n\n              const intensityDisplay = reflectionEmotion && typeof reflectionEmotion.intensity === 'number'\n                ? (reflectionEmotion.intensity >= 0 && reflectionEmotion.intensity <= 1\n                    ? `${Math.round(reflectionEmotion.intensity * 100)}%`\n                    : reflectionEmotion.intensity.toFixed(2))\n                : null;\n\n              return (\n              <div key={index} className=\"relative\">\n                {/* Timeline node */}\n                <div \n                  className=\"absolute -left-[21px] w-4 h-4 rounded-full bg-[var(--color-accent)]\"\n                  style={{ top: '0px' }}\n                ></div>\n                \n                {/* Evolution entry */}\n                <div className=\"bg-[var(--color-bg-elev-2)] rounded p-3 pb-4 border border-[var(--color-border)]\">\n                  <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-xs text-gray-400\">\n                      {formatDate(entry.timestamp)}\n                    </span>\n                    <div className=\"flex gap-2\">\n                      <span \n                        className={`text-xs px-2 rounded ${\n                          entry.confidence >= 0.7 \n                            ? 'bg-green-900/50 text-green-300' \n                            : entry.confidence >= 0.4 \n                              ? 'bg-yellow-900/50 text-yellow-300'\n                              : 'bg-red-900/50 text-red-300'\n                        }`}\n                      >\n                        Confidence: {Math.round(entry.confidence * 100)}%\n                      </span>\n                      {entry.impact_score !== undefined && (\n                        <span className={`text-xs px-2 rounded ${\n                          entry.impact_score >= 0.7 \n                            ? 'bg-purple-900/50 text-purple-300' \n                            : entry.impact_score >= 0.4 \n                              ? 'bg-blue-900/50 text-blue-300'\n                              : 'bg-gray-900/50 text-gray-300'\n                        }`}>\n                          Impact: {entry.impact_score >= 0.7 ? 'High' : entry.impact_score >= 0.4 ? 'Medium' : 'Low'}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <h5 className=\"text-sm font-medium text-white mb-1\">\n                    {(() => {\n                      const sourceTypeLabels = {\n                        'reflection': 'Reflection-Driven Evolution',\n                        'learning': 'Learning-Based Growth',\n                        'scheduled': 'Scheduled Reassessment',\n                        'user_feedback': 'User Feedback Integration',\n                        'bootstrap': 'Initial Bootstrap'\n                      };\n                      return sourceTypeLabels[entry.source_type] || 'System Update';\n                    })()}\n                  </h5>\n                  \n                  <p className=\"text-sm text-gray-300 mb-2\">\n                    {entry.source_type === 'bootstrap' \n                      ? 'Initial identity bootstrap - persona emerged with core traits, values, and communication style'\n                      : (entry.reasoning || 'No description provided')\n                    }\n                  </p>\n                  \n                  <div className=\"mt-2 text-xs\">\n                    <div className=\"flex items-center gap-1 text-[var(--color-accent)] mb-1\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <path d=\"M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34\"></path>\n                        <polygon points=\"18 2 22 6 12 16 8 16 8 12 18 2\"></polygon>\n                      </svg>\n                      <span>Changes</span>\n                    </div>\n                    <ul className=\"list-disc list-inside pl-2 text-gray-400\">\n                      {normalizedChanges.map((change, idx) => (\n                        <li key={idx}>{change}</li>\n                      ))}\n                      {normalizedChanges.length === 0 && (\n                        <li className=\"text-gray-500 italic\">No specific changes recorded</li>\n                      )}\n                    </ul>\n                  </div>\n                  \n                  {(entry.learning_id || (entry.evidence && entry.evidence.reflection_id)) && (\n                    <div className=\"mt-2 pt-2 border-t border-gray-700/50 text-xs\">\n                      {entry.learning_id && (\n                        <div className=\"text-gray-500\">\n                          Learning ID: {entry.learning_id.substring(0, 8)}...\n                        </div>\n                      )}\n                      {entry.evidence && entry.evidence.reflection_id && (\n                        <div>\n                          <div className=\"mb-1\">\n                            <span className=\"text-gray-500\">Triggered by: </span>\n                            <span className=\"text-[var(--color-accent)] font-mono text-xs\">\n                              Reflection {entry.evidence.reflection_id.substring(0, 8)}...\n                            </span>\n                          </div>\n                          \n                          {/* Display reflection themes if available */}\n                          {reflectionThemes.length > 0 && (\n                            <div className=\"mt-1 mb-1\">\n                              <span className=\"text-gray-500\">Themes: </span>\n                              <span className=\"text-gray-400\">\n                                {reflectionThemes.join(', ')}\n                              </span>\n                            </div>\n                          )}\n                          \n                          {/* Display full reflection content if available */}\n                          {(reflectionContentText || reflectionInsights.length > 0 || reflectionActions.length > 0 || reflectionEmotion) && (\n                            <div className=\"mt-2 p-3 bg-gray-800/30 rounded border-l-2 border-[var(--color-accent)]/30 text-gray-300\">\n                              <div className=\"text-gray-500 text-xs mb-2\">ðŸ’­ Reflection</div>\n                              {reflectionContentText && (\n                                <div className=\"whitespace-pre-wrap text-sm mb-2\">{reflectionContentText}</div>\n                              )}\n                              {reflectionInsights.length > 0 && (\n                                <div className=\"mb-2\">\n                                  <div className=\"text-gray-500 text-[10px] uppercase tracking-wide mb-1\">Insights</div>\n                                  <ul className=\"list-disc list-inside text-xs space-y-1 text-gray-300\">\n                                    {reflectionInsights.map((insight, insightIdx) => (\n                                      <li key={insightIdx}>{insight}</li>\n                                    ))}\n                                  </ul>\n                                </div>\n                              )}\n                              {reflectionActions.length > 0 && (\n                                <div className=\"mb-2\">\n                                  <div className=\"text-gray-500 text-[10px] uppercase tracking-wide mb-1\">Actions</div>\n                                  <ul className=\"list-disc list-inside text-xs space-y-1 text-gray-300\">\n                                    {reflectionActions.map((action, actionIdx) => (\n                                      <li key={actionIdx}>{action}</li>\n                                    ))}\n                                  </ul>\n                                </div>\n                              )}\n                              {reflectionEmotion && (\n                                <div className=\"text-xs text-gray-400 space-y-1\">\n                                  {reflectionEmotion.primary && (\n                                    <div>\n                                      <span className=\"text-gray-500\">Primary:</span> {reflectionEmotion.primary}\n                                    </div>\n                                  )}\n                                  {intensityDisplay && (\n                                    <div>\n                                      <span className=\"text-gray-500\">Intensity:</span> {intensityDisplay}\n                                    </div>\n                                  )}\n                                  {Array.isArray(reflectionEmotion.secondary) && reflectionEmotion.secondary.length > 0 && (\n                                    <div>\n                                      <span className=\"text-gray-500\">Secondary:</span> {reflectionEmotion.secondary.join(', ')}\n                                    </div>\n                                  )}\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )})}\n          </div>\n        ) : (\n          <div className=\"bg-[var(--color-bg-elev-2)] p-4 rounded-md text-center border border-[var(--color-border)]\">\n            <p className=\"text-gray-400\">No evolution history available yet</p>\n            <p className=\"text-xs text-gray-500 mt-1\">\n              The persona will evolve autonomously as it learns from conversations and reflections\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PersonaEvolution;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}